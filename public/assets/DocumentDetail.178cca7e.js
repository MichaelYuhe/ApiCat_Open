import{b as C,D as S,V as a,W as f,X as c,Y as l,Z as E,a0 as I,a1 as M,a2 as w,a3 as L}from"./index.6adbff9a.js";import{m as A,u as j}from"./useHighlight.10314a85.js";import{t as z,bo as B,U as d,c as m,a as n,Z as N,X as _,_ as u,T as p,V as g,a6 as q,ar as P,o as h,Y as y}from"./vendor.2ee35ec0.js";import"./element-plus.5b1d6711.js";var H="/assets/icon-empty.9fe6949e.png";function v(t,e){document.querySelectorAll('[data-pid="'+t+'"]').forEach(function(i){let s=i.querySelector("i.editor-arrow-right");s&&!a(s,"expand")&&c(s,"expand");let o=f(i,"data-id");i.style.display=e?null:"none",o&&v(o,e)})}const O={watch:{"$route.params.node_id":function(){this.getDocumentDetail()}},setup(){const{initHighlight:t}=j(),e=z("documentImportModal");return{initHighlight:t,documentImportModal:e}},data(){return{zoomTemplate:`<template id="template-zoom-image">
                            <div class="zoom-image-wrapper">
                                <div class="zoom-image-container" data-zoom-container></div>
                            </div>
                          </template>`,zoomImageOption:{template:"#template-zoom-image",container:"[data-zoom-container]"},hasDocument:!0,isLoading:!0,DOCUMENT_TYPES:S,document:{},project_id:null}},methods:{onEditBtnClick(){this.$router.push({name:"document.api.edit",params:{project_id:this.$route.params.project_id,node_id:this.$route.params.node_id}})},initTableToggle(){document.querySelectorAll(".ac-param-table .editor-arrow-right").forEach(function(t){t.onclick=function(){v(f(this,"data-id"),!a(this,"expand")),c(this,"expand")}}),document.querySelectorAll("div.collapse-title .response_body_title").forEach(function(t){t.onclick=function(){let e=this.parentElement,i=e.parentElement,s=a(i,"close");l(e.nextElementSibling,s),l(i.nextElementSibling,s),c(i,"close")}}),document.querySelectorAll("h3.collapse-title >span").forEach(function(t){t.onclick=function(){let e=this.parentElement,i=a(e,"close");l(e.nextElementSibling,i),c(e,"close")}})},initMediumZoom(){A(".ProseMirror .image-view img",this.zoomImageOption)},initTippy(){B("[data-tippy-content]",{theme:"light",appendTo:document.querySelector(".ProseMirror")})},initCodeBlockToClipboard(){document.querySelectorAll(".code-block button").forEach(t=>{t.setAttribute("data-text",t.parentElement.querySelector("code").innerText)})},initStaticDocInteractive(){this.$nextTick(()=>{this.initTableToggle(),this.initTippy(),this.initMediumZoom(),this.initCodeBlockToClipboard(),this.initHighlight(document.querySelectorAll("pre code"))})},onImportBtnCLick(){this.documentImportModal.show({project_id:this.$route.params.project_id},E)},getDocumentDetail(){const t=parseInt(this.$route.params.node_id,10);if(isNaN(t)){this.isLoading=!1,this.hasDocument=!1;return}this.doc_id=t,this.project_id=parseInt(this.$route.params.project_id,10),this.isLoading=!0,this.hasDocument=!0,I(this.project_id,this.doc_id,"html").then(e=>{this.document=this.transferDoc(e.data||{}),this.initStaticDocInteractive()}).catch(e=>{}).finally(()=>{this.$nextTick(()=>{this.isLoading=!1,M()})})},transferDoc(t){return t}},mounted(){this.getDocumentDetail()},unmounted(){this.document={},this.isLoading=!0,this.hasDocument=!0}},V={class:"ac-document is-detail"},Z={class:"ac-document__title"},U=["innerHTML"],Y={class:"ac-document__operate"},R={class:"ac-document__operate-inner text-right"},X=y(" \u7F16\u8F91 "),G={key:0},W=n("img",{src:H,alt:""},null,-1),$={style:{width:"470px",display:"block",margin:"auto"}},F=y(" \u60A8\u5F53\u524D\u5C1A\u672A\u521B\u5EFA\u6587\u6863\uFF0C\u8BF7\u4ECE\u5DE6\u4FA7\u76EE\u5F55\u680F\u70B9\u51FB\u6DFB\u52A0\uFF0C\u5F00\u59CB\u5728\u7EBF\u7EF4\u62A4 API \u6587\u6863\u3002\u60A8\u8FD8\u53EF\u4EE5\u5C06\u672C\u5730\u9879\u76EE "),J=["innerHTML"];function K(t,e,i,s,o,r){const D=q("el-button"),T=w,k=L,b=P("loading");return d((h(),m("div",V,[d(n("div",null,[n("h1",Z,N(o.document.title),1),o.document.content?(h(),m("div",{key:0,class:"ProseMirror readonly",innerHTML:o.document.content},null,8,U)):_("",!0),d(n("div",Y,[n("div",R,[u(D,{type:"primary",onClick:r.onEditBtnClick},{default:p(()=>[X]),_:1},8,["onClick"])])],512),[[g,!o.isLoading]])],512),[[g,o.hasDocument&&o.document.id]]),o.hasDocument?_("",!0):(h(),m("div",G,[u(T,{styles:{width:"260px",height:"auto","margin-bottom":"26px"}},{icon:p(()=>[W]),title:p(()=>[n("div",$,[F,n("a",{class:"text-blue-600",href:"javascript:void(0);",onClick:e[0]||(e[0]=(...x)=>r.onImportBtnCLick&&r.onImportBtnCLick(...x))},"\u5BFC\u5165")])]),_:1})])),u(k,{bottom:100,right:100}),n("div",{innerHTML:o.zoomTemplate},null,8,J)])),[[b,o.isLoading]])}var it=C(O,[["render",K]]);export{it as default};
