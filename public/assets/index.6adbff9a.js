var eo=Object.defineProperty,to=Object.defineProperties;var oo=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var so=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable;var pt=(e,t,o)=>t in e?eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,P=(e,t)=>{for(var o in t||(t={}))so.call(t,o)&&pt(e,o,t[o]);if(dt)for(var o of dt(t))no.call(t,o)&&pt(e,o,t[o]);return e},re=(e,t)=>to(e,oo(t));import{o as u,c as h,b7 as Te,b8 as Oe,a,b9 as ge,d as K,ba as le,v as I,S as V,X as x,_ as c,bb as io,F as N,r as w,bc as Me,bd as ro,be as Ie,y as qe,a6 as f,T as d,ai as H,Y as R,Z as D,O as $,x as gt,$ as ao,u as pe,M as xe,aw as co,ax as lo,bf as uo,a5 as he,a2 as vt,bg as At,az as po,U as Y,V as ee,bh as yt,ar as Be,a8 as Et,aC as Ct,Q as ho,ah as Xe,bi as _o,bj as wt,aH as It,ak as bt,bk as mo,bl as et,P as fo,bm as kt,t as He,au as go,b6 as vo,bn as ye,bo as Ao,p as yo,aZ as Eo,bp as se,bq as Co,br as wo,bs as Io,b4 as bo,bt as ko}from"./vendor.2ee35ec0.js";import{E as te,a as Po,b as jo,m as So,f as Do,e as xo,_ as Ro,c as Lo,d as Pt,g as No,s as jt,h as To,i as Oo,v as Mo,j as Bo,k as $o,p as Fo,l as Vo}from"./element-plus.5b1d6711.js";const Go=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}};Go();var F=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o};const Uo={},Yo=e=>(Te("data-v-0ab3f129"),e=e(),Oe(),e),Ko={class:"vertical-center splash"},Jo=Yo(()=>a("div",{class:"w-full text-center text-light"},[a("svg",{class:"spin",style:{width:"70px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},[a("path",{id:"p",fill:"#006bff",d:"M94.1 58.8c.6-2.8.9-5.8.9-8.8s-.3-6-.9-8.8l-11.7-.4c-.7-2.6-1.7-5-3-7.3l8-8.5c-3.3-4.9-7.5-9.2-12.5-12.5l-8.5 8c-2.3-1.3-4.7-2.3-7.3-3l-.3-11.6C56 5.3 53 5 50 5s-6 .3-8.8.9l-.4 11.7c-2.6.7-5 1.7-7.3 3l-8.5-8c-4.9 3.3-9.2 7.5-12.5 12.5l8 8.5c-1.3 2.3-2.3 4.7-3 7.3l-11.6.3C5.3 44 5 47 5 50s.3 6 .9 8.8l11.7.4c.7 2.6 1.7 5 3 7.3l-8 8.5c3.3 4.9 7.5 9.2 12.5 12.5l8.5-8c2.3 1.3 4.7 2.3 7.3 3l.4 11.7c2.7.5 5.7.8 8.7.8s6-.3 8.8-.9l.4-11.7c2.6-.7 5-1.7 7.3-3l8.5 8c4.9-3.3 9.2-7.5 12.5-12.5l-8-8.5c1.3-2.3 2.3-4.7 3-7.3l11.6-.3zM50 66.9c-9.3 0-16.9-7.6-16.9-16.9S40.7 33.1 50 33.1 66.9 40.7 66.9 50 59.3 66.9 50 66.9z"})])],-1)),Ho=[Jo];function zo(e,t){return u(),h("div",Ko,Ho)}var Zo=F(Uo,[["render",zo],["__scopeId","data-v-0ab3f129"]]);const Qo=ge({id:"app.store",state:()=>({isShowLoading:!1}),actions:{showLoading(){this.isShowLoading=!0},hideLoading(){this.isShowLoading=!1}}}),Wo=K({setup(e){const t=Qo(),{isShowLoading:o}=le(t);return(s,n)=>{const i=Zo;return u(),h(N,null,[I(o)?(u(),V(i,{key:0})):x("",!0),c(I(io))],64)}}}),qo="/",Ee="/login",tt="/register",ot="/main",Q={path:"/404"},St="document",Ce="preview.project",Re=`${Ce}.verification`,we="preview.document",Le=`${we}.verification`;var be="/assets/logo.1c8e1405.svg";function Xo(e,t){t=P({isCatch:!0,isShowMessage:!0},t);const o=w(!1),{isCatch:s,isShowMessage:n,msg:i}=t;async function r(p){o.value=!0;try{const l=await e(p)||{};return n&&(i||l.msg)&&te.success(i||l.msg),l}catch(l){if(s)return{};throw l}finally{o.value=!1}}return[o,r]}const es="/api",ts=1e3*10,Ic=15;var de=(e=>(e[e.OK=0]="OK",e[e.FAIL=-1]="FAIL",e[e.NO_LOGIN=-2]="NO_LOGIN",e[e.NO_PARENT_DIR=-102]="NO_PARENT_DIR",e[e.NO_EXIST_TEAM=-100]="NO_EXIST_TEAM",e[e.INVALID_PREVIEW_SECRET=-103]="INVALID_PREVIEW_SECRET",e[e.NOT_FOUND=-404]="NOT_FOUND",e))(de||{});const _e={ADMIN:0,MANAGER:1,NORMAL:2},os=[{text:"\u7BA1\u7406\u5458",value:_e.MANAGER},{text:"\u666E\u901A\u6210\u5458",value:_e.NORMAL}];[_e.ADMIN,...os];const je={ADMIN:"admin",MANAGER:"manager",DEVELOPER:"developer",READER:"reader"},Z={MANAGER:0,DEVELOPER:1,READER:2},ss=[{text:"\u56E2\u961F\u7BA1\u7406\u5458",value:999,key:je.ADMIN},{text:"\u7BA1\u7406\u8005",value:0,key:je.MANAGER},{text:"\u7EF4\u62A4\u8005",value:1,key:je.DEVELOPER},{text:"\u9605\u8BFB\u8005",value:2,key:je.READER}],bc=ss.filter(e=>e.key!=="admin"&&e.key!=="manager"),me={WAIT:"wait",FINISH:"finish",FAIL:"fail"},ns="--",kc={TYPES:[{text:"Int",value:1},{text:"Float",value:2},{text:"String",value:3},{text:"Array",value:4},{text:"Object",value:5},{text:"Boolean",value:6},{text:"File",value:7}],valueOf(e){return(this.TYPES.find(t=>t.value===e)||{text:ns}).text}},Pc={API:{text:"\u63A5\u53E3\u6587\u6863",key:"api.doc",value:1},DB:{text:"\u6570\u636E\u5E93\u6587\u6863",key:"db.doc",value:2}},fe={DIR:0,DOC:1,HTTP:1,OTHER:2,MARKDOWN:3};function ht(e){return typeof e=="function"}const is=e=>e.map(t=>({name:t.name,meta:t.meta})),Dt=e=>(e||"").substring(0,1).toUpperCase(),ie=(e,t,o={subKey:"children"})=>{if(!t)return;const{subKey:s}=o;let n=!1;const i=[];for(let r=0;r<t.length;r++){const p=t[r];if(n=e(p,t)===!1,i.push(p),n)break;const l=p[s];if(l&&l.length&&(n=ie(e,l,o)===!1,n))break}return n?!1:i};function jc(e,t){e&&e.classList&&e.classList.toggle(t)}function Sc(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function Dc(e,t){return e&&e.getAttribute(t)}function xc(e,t){!e||(e.style.display=t?null:"none")}const Rc=e=>Math.floor((Date.now()-new Date(e).getTime())/(1e3*3600*24)),ze=new WeakMap;function st(e){let t=ze.get(e);return t||ze.set(e,t=Object.create(null)),t}function xt(e,t,o){if(Array.isArray(t))t.forEach(s=>xt(e,s,o));else{const s=st(e);(s[t]||(s[t]=[])).push(o)}return e}function rs(e,t,o){const s=(...n)=>{Rt(e,t,s),o.call(e,...n)};return s.fn=o,xt(e,t,s),e}function Rt(e,t,o){const s=e;if(!t)return ze.set(e,Object.create(null)),s;if(Array.isArray(t))return t.forEach(r=>Rt(e,r,o)),s;const n=st(e),i=n[t];return i?o?(n[t]=i.filter(r=>!(r===o||r.fn===o)),s):(n[t]=void 0,s):s}function nt(e,t,...o){e&&e.$emit&&e.$emit(t,...o);const s=st(e)[t];return s&&s.map(n=>n.apply(e,o)),e}function Lc(e){return/^[A-Z0-9._+-]+@[A-Z0-9.-]+\.[A-Z]{2,63}$/i.test(e)}const as=()=>!!window.ActiveXObject||"ActiveXObject"in window,cs=e=>{function t(n){const i=document.getElementById("IframeReportImg");if(!i){const r=document.createElement("iframe");r.setAttribute("id","IframeReportImg"),r.setAttribute("style","display: none;"),r.setAttribute("name","IframeReportImg"),r.setAttribute("onload","downloadImg()"),r.setAttribute("width","0"),r.setAttribute("height","0"),r.setAttribute("src","about:blank"),document.body.appendChild(r)}i.getAttribute("src")!==n?i.setAttribute("src",n):o()}function o(){document.getElementById("IframeReportImg").getAttribute("src")!=="about:blank"&&window.frames.IframeReportImg.document.execCommand("SaveAs")}function s(n){const i=document.createElement("a");i.setAttribute("id","downloadImg"),i.setAttribute("style","display: none;"),i.setAttribute("href",n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}as()?t(e):s(e)},Ae="api.cat",C={KEYS:{TOKEN:`${Ae}.token`,USER_INFO:`${Ae}.user.info`,ACTIVE_PROJECT_GROUP:`${Ae}.active.project.group`,SECRET_DOCUMENT_TOKEN:`${Ae}.preview.document.`,SECRET_PROJECT_TOKEN:`${Ae}.preview.project.`},get(e,t){if(!this.isLocalStorage())return;const o=this.getStorage(t).getItem(e);if(o)return JSON.parse(o)},set(e,t,o){!this.isLocalStorage()||(t=JSON.stringify(t),this.getStorage(o).setItem(e,t))},remove(e,t){if(!!this.isLocalStorage())return this.getStorage(t).removeItem(e),this},removeAll(e=[]){(e.length?e:Object.keys(this.KEYS)).forEach(t=>this.remove(e.length?t:this.KEYS[t]))},getStorage(e){return e?sessionStorage:localStorage},isLocalStorage(){try{return!!window.localStorage}catch{return!1}}},Lt={baseURL:es,headers:{Accept:"application/json, text/plain, */*"}};Me.defaults.timeout=ts;var _=Me.create(Lt);const Ze=Me.create(Lt),ls=(e={})=>_.post("/email_login",P({},e)),us=(e={})=>_.post("/email_register",P({},e)),ds=()=>_.post("/logout"),Nc=(e={})=>_.post("/user/change_avatar",e),ps=(e={})=>_.post("/user/change_profile",P({},e)),hs=()=>_.get("/user/profile").then(e=>{if(e.data){const{name:t,avatar:o}=e.data;o||(e.data.lastName=Dt(t||"\u65E0"))}return e}),Tc=()=>Xo((e={})=>_.post("/user/change_password",P({},e))),ae=ge({id:"user",state:()=>({token:C.get(C.KEYS.TOKEN)||null,userInfo:C.get(C.KEYS.USER_INFO)||{}}),getters:{isLogin:e=>!!e.token,isAdmin:e=>e.userInfo.authority===_e.ADMIN,isManager:e=>e.userInfo.authority===_e.MANAGER,isNormal:e=>e.userInfo.authority===_e.NORMAL,lastName:e=>Dt(e.userInfo.name)},actions:{updateToken(e){C.set(C.KEYS.TOKEN,e),this.token=e},async login(e){try{const t=await ls(e);return await this.getUserInfo(),this.goHome(),t}catch{}},async register(e){try{const t=await us(e);return this.goHome(),t}catch{}},async logout(){C.removeAll([C.KEYS.TOKEN,C.KEYS.USER_INFO,C.KEYS.ACTIVE_PROJECT_GROUP]);try{await ds()}catch{}finally{this.token=null,this.userInfo={},location.href=Ee}},async getUserInfo(){if(!ro.exports.isEmpty(this.userInfo))return this.userInfo;try{const{data:e}=await hs()||{};return C.set(C.KEYS.USER_INFO,e),this.userInfo=e,this.userInfo}catch{}return{}},goHome(e){ne.replace(e||ot)},async updateUserInfo(e){await ps(e),this.$patch({userInfo:{name:e.name,email:e.email,avatar:e.avatar}}),C.set(C.KEYS.USER_INFO,this.userInfo)}}}),_s={class:"h-14"},ms={class:"shadow bg-white fixed top-0 w-full z-50"},fs={class:"viewport relative flex items-center justify-between h-14"},gs={class:"flex-1 flex items-center"},vs=a("img",{class:"h-10 w-auto",src:be,alt:"ApiCat"},null,-1),As=a("span",{class:"logo-text logo-apicat"},"ApiCat",-1),ys={class:"ml-6"},Es={class:"flex items-center"},Cs={class:"ml-3 relative"},ws={class:"el-dropdown-link"},Is={type:"button",class:"flex items-center rounded-full","aria-expanded":"false","aria-haspopup":"true"},bs=["src"],ks={key:1},Ps={class:"flex flex-col divide-y text-sm justify-center"},js={class:"px-6 py-2"},Ss=["title"],Ds=["title"],xs={class:"ml-1"},Rs=a("i",{class:"iconfont iconIconPopoverExit"},null,-1),Ls=a("span",{class:"ml-1"},"\u9000\u51FA\u767B\u5F55",-1),Ns=[Rs,Ls],Ts=K({setup(e){const t={modifiers:[{name:"offset",options:{offset:[-24,10]}}]},o=w([{name:"user.profile",title:"\u4E2A\u4EBA\u4FE1\u606F",icon:"iconIconPopoverUser"}]),s=[{name:"projects",title:"\u9879\u76EE",active:"project"},{name:"members",title:"\u6210\u5458"}],n=ae(),{currentRoute:i}=Ie(),{userInfo:r,lastName:p}=le(n),l=async()=>{await n.logout()},m=j=>["px-3",{"text-blue-600":(i.value.name||"").startsWith(j.active||j.name)}];return qe(async()=>{await n.getUserInfo()}),(j,E)=>{const g=f("router-link"),v=f("el-avatar"),S=f("el-icon"),W=f("el-dropdown-menu"),A=f("el-dropdown");return u(),h("header",_s,[a("div",ms,[a("div",fs,[a("div",gs,[c(g,{class:"inline-flex items-center",to:"/main"},{default:d(()=>[vs,As]),_:1}),a("div",ys,[(u(),h(N,null,H(s,L=>c(g,{to:{name:L.name},key:L.name,class:$(m(L))},{default:d(()=>[R(D(L.title),1)]),_:2},1032,["to","class"])),64))])]),a("div",Es,[a("div",Cs,[c(A,{placement:"bottom-end",trigger:"click","popper-class":"nav-dropdown","popper-options":t},{dropdown:d(()=>[c(W,null,{default:d(()=>[a("div",Ps,[a("div",js,[a("p",{class:"text-base font-bold text-gray-600 truncate",title:I(r).name},D(I(r).name),9,Ss),a("p",{class:"text-gray-500 truncate",title:I(r).email},D(I(r).email),9,Ds)]),(u(!0),h(N,null,H(o.value,L=>(u(),V(g,{key:L.name,class:"flex items-center px-6 py-3 hover:text-gray-700",to:{name:L.name}},{default:d(()=>[a("i",{class:$("iconfont "+L.icon)},null,2),a("span",xs,D(L.title),1)]),_:2},1032,["to"]))),128)),a("a",{class:"flex items-center px-6 py-3 hover:text-gray-700",href:"javascript:void(0)",onClick:l},Ns)])]),_:1})]),default:d(()=>[a("span",ws,[a("button",Is,[c(v,null,{default:d(()=>[I(r).avatar?(u(),h("img",{key:0,src:I(r).avatar},null,8,bs)):(u(),h("span",ks,D(I(p)),1))]),_:1}),c(S,{class:"el-icon--right"},{default:d(()=>[c(I(Po))]),_:1})])])]),_:1})])])])])])}}}),Os={class:"viewport px-8 py-4"},Ms=K({setup(e){return(t,o)=>{const s=f("router-view");return u(),h(N,null,[c(Ts),a("main",Os,[c(s)])],64)}}}),Bs="modulepreload",_t={},$s="/",M=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${$s}${s}`,s in _t)return;_t[s]=!0;const n=s.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const r=document.createElement("link");if(r.rel=n?"stylesheet":Bs,n||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),n)return new Promise((p,l)=>{r.addEventListener("load",p),r.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};const oe=e=>(Te("data-v-47f509cc"),e=e(),Oe(),e),Fs={class:"h-14"},Vs={class:"shadow bg-white fixed top-0 w-full z-50"},Gs={class:"viewport relative items-center justify-between h-14 lg:flex hidden"},Us={class:"flex-1 flex items-center"},Ys=oe(()=>a("div",{class:"flex-shrink-0 flex"},[a("a",{class:"inline-flex items-center",href:"/"},[a("img",{class:"h-10 w-auto",src:be,alt:"ApiCat"}),a("span",{class:"logo-text logo-apicat"},"ApiCat")])],-1)),Ks={key:0,class:"ml-6 hidden lg:block"},Js=oe(()=>a("div",{class:"flex text-gray-600"},[a("a",{href:"https://apicat.net",target:"_blank",class:"px-3 py-2 rounded-md text-sm"},"\u9996\u9875"),a("a",{href:"https://apicat.net/app/31eb8ec8c295c8c4130ee50304d55ab5",target:"_blank",class:"px-3 py-2 rounded-md text-sm"},"\u6587\u6863"),a("a",{href:"https://github.com/NatosoftCN/ApiCat_Open",target:"_blank",class:"px-3 py-2 rounded-md text-sm"},"Github")],-1)),Hs=[Js],zs={key:0},Zs=R("\u767B\u5F55"),Qs=R("\u6CE8\u518C"),Ws={class:"lg:hidden"},qs={class:"flex items-center justify-between h-14 px-4 relative"},Xs=oe(()=>a("img",{class:"h-10 w-auto",src:be,alt:"ApiCat"},null,-1)),en=oe(()=>a("span",{class:"logo-text logo-apicat"},"ApiCat",-1)),tn=oe(()=>a("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",style:{"font-size":"24px"},fill:"currentColor"},[a("path",{d:"M21 7H3V5H21V7Z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor"}),a("path",{d:"M21 13H3V11H21V13Z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor"}),a("path",{d:"M21 19H3V17H21V19Z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor"})],-1)),on=[tn],sn={key:0,class:"bg-white fixed top-0 left-0 w-full max-h-screen flex flex-col z-10"},nn={class:"flex items-center justify-between h-14 px-4"},rn=oe(()=>a("img",{class:"h-10 w-auto",src:be,alt:"ApiCat"},null,-1)),an=oe(()=>a("span",{class:"logo-text logo-apicat"},"ApiCat",-1)),cn=oe(()=>a("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",style:{"font-size":"24px"},fill:"currentColor"},[a("path",{d:"M12.0001 13.4141L17.6568 19.0708L19.0711 17.6566L13.4143 11.9998L19.0711 6.34304L17.6569 4.92883L12.0001 10.5856L6.34314 4.92871L4.92893 6.34292L10.5859 11.9998L4.92896 17.6567L6.34317 19.071L12.0001 13.4141Z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor"})],-1)),ln=[cn],un={class:"flex-1 overflow-y-auto"},dn=oe(()=>a("div",{class:"px-4 text-base font-medium"},[a("a",{class:"px-3 py-2 mb-1 rounded-lg block",href:"/"},"\u9996\u9875"),a("a",{class:"px-3 py-2 mb-1 rounded-lg block",href:"#"},"\u6587\u6863"),a("a",{class:"px-3 py-2 mb-1 rounded-lg block",href:"#"},"GitHub")],-1)),pn={class:"px-5"},hn=R("\u767B\u5F55"),_n=R("\u6CE8\u518C"),mn=K({props:{isShowNav:{type:Boolean,default:!0}},setup(e){const t=w(!1);return gt(t,()=>{document.body.classList.toggle("overflow-hidden")}),(o,s)=>{const n=f("el-button"),i=f("router-link");return u(),h("header",Fs,[a("div",Vs,[a("div",Gs,[a("div",Us,[Ys,e.isShowNav?(u(),h("div",Ks,Hs)):x("",!0)]),e.isShowNav?(u(),h("div",zs,[c(i,{to:I(Ee),class:"mr-4"},{default:d(()=>[c(n,null,{default:d(()=>[Zs]),_:1})]),_:1},8,["to"]),c(i,{to:I(tt)},{default:d(()=>[c(n,{type:"primary"},{default:d(()=>[Qs]),_:1})]),_:1},8,["to"])])):x("",!0)]),a("div",Ws,[a("div",qs,[c(i,{class:"inline-flex items-center",to:"/"},{default:d(()=>[Xs,en]),_:1}),a("div",{class:"cursor-pointer",onClick:s[0]||(s[0]=r=>t.value=!t.value)},on),c(ao,{name:"slide-fade"},{default:d(()=>[t.value?(u(),h("div",sn,[a("div",nn,[c(i,{class:"inline-flex items-center",to:"/"},{default:d(()=>[rn,an]),_:1}),a("div",{class:"cursor-pointer",onClick:s[1]||(s[1]=r=>t.value=!t.value)},ln)]),a("div",un,[dn,a("div",pn,[c(i,{to:"/login"},{default:d(()=>[c(n,{class:"w-full"},{default:d(()=>[hn]),_:1})]),_:1}),c(i,{to:"/"},{default:d(()=>[c(n,{type:"primary",class:"w-full my-5"},{default:d(()=>[_n]),_:1})]),_:1})])])])):x("",!0)]),_:1}),t.value?(u(),h("div",{key:0,class:"fixed top-0 left-0 w-screen h-screen bg-opacity-40 bg-gray-900",onClick:s[2]||(s[2]=r=>t.value=!t.value)})):x("",!0)])])])])}}});var fn=F(mn,[["__scopeId","data-v-47f509cc"]]);const Nt=K({setup(e){const t=w(!0);return pe("switchNavState",s=>{t.value=s}),(s,n)=>{const i=f("router-view");return u(),h(N,null,[c(fn,{"is-show-nav":t.value},null,8,["is-show-nav"]),c(i)],64)}}}),gn=()=>M(()=>import("./Index.ee6398d4.js"),["assets/Index.ee6398d4.js","assets/Index.46d30f47.css","assets/vendor.2ee35ec0.js"]),vn=()=>M(()=>import("./Login.41ac7ec0.js"),["assets/Login.41ac7ec0.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),An=()=>M(()=>import("./Register.ad8babd0.js"),["assets/Register.ad8babd0.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),yn=()=>M(()=>import("./NotFound.d9c83546.js"),["assets/NotFound.d9c83546.js","assets/NotFound.3339f423.css","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),En={path:qo,name:"index",component:Nt,meta:{ignoreAuth:!0},children:[{path:"",name:"index.feature",component:gn}]},Cn={path:Ee,name:"login",meta:{ignoreAuth:!0},component:vn},wn={path:tt,name:"register",meta:{ignoreAuth:!0},component:An},In={path:"/:path(.*)*",name:"error",component:Nt,meta:{ignoreAuth:!0},children:[{path:"/:path(.*)*",name:"error.not.found",component:yn}]},bn={class:"flex flex-col border divide-y bg-white"},kn=K({props:{menus:{type:Array,default:()=>[]}},setup(e){return(t,o)=>{const s=f("router-link");return u(),h("div",bn,[(u(!0),h(N,null,H(e.menus,n=>(u(),V(s,{key:n.name,to:{name:n.name},class:"relative h-12 pl-6 flex items-center text-neutral-600 hover:text-neutral-900"},{default:d(()=>[a("span",null,D(n.meta.title),1)]),_:2},1032,["to"]))),128))])}}}),Pn={},jn={class:"flex justify-between flex-col lg:flex-row"},Sn={class:"sidebar-nav flex-none lg:w-64 mb-4 lg:mb-0"},Dn={class:"flex-auto lg:ml-4 overflow-hidden"};function xn(e,t){const o=kn,s=f("RouterView");return u(),h("div",jn,[a("aside",Sn,[xe(e.$slots,"default",{},()=>[c(o,co(lo(e.$attrs)),null,16)])]),a("div",Dn,[c(s)])])}var Tt=F(Pn,[["render",xn]]);const Rn=K({setup(e){const t=w(Ot);return(o,s)=>(u(),V(Tt,{menus:t.value},null,8,["menus"]))}}),Ln=()=>M(()=>import("./UserProfile.c23921d1.js"),["assets/UserProfile.c23921d1.js","assets/ImagePreview.aca73709.js","assets/ImagePreview.e9afec23.css","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),Nn=()=>M(()=>import("./ModifyPassword.6788e880.js"),["assets/ModifyPassword.6788e880.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),Ot=[{path:"profile",name:"user.profile",meta:{title:"\u4E2A\u4EBA\u4FE1\u606F"},component:Ln},{path:"password",name:"user.password",meta:{title:"\u4FEE\u6539\u5BC6\u7801"},component:Nn}];var Tn={path:"/user",name:"user",redirect:{name:"user.profile"},component:Rn,children:Ot};const On=()=>M(()=>import("./MemberList.265dc8ae.js"),["assets/MemberList.265dc8ae.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css","assets/usePage.9fa89480.js"]);var Mn={path:"/members",name:"members",component:On};const Oc=(e={})=>_.post("/project/create",e),Mc=(e={})=>_.post("/project/icon",e),Bc=e=>_.post("/project/remove",{project_id:e}),$c=e=>_.post("/project/quit",{project_id:e}),Fc=(e={})=>_.post("/project/add_member",e),Vc=e=>_.get("/project/members",{params:e}),Gc=(e,t)=>_.post("/project/remove_member",{project_id:e,user_id:t}),Uc=(e,t)=>_.post("/project/transfer",{project_id:e,user_id:t}),Yc=(e={})=>_.post("/project/change_member_authority",e),Bn=(e={})=>_.post("/project/setting",e),$n=(e,t)=>_.post("/project/share",{project_id:e,share:t}),Fn=e=>_.post("/project/reset_share_secretkey",{project_id:e}),Kc=(e={})=>_.post("/doc/restore_api_doc",e),Jc=e=>_.get("/projects",{params:{group_id:e==0?"":e}}),Vn=e=>_.post("/project_group/create",e),Gn=()=>_.get("/project_groups"),Un=e=>_.post("/project_group/remove",{id:e}),Yn=e=>_.post("/project_group/rename",e),Kn=e=>_.post("/project_group/change_order",{ids:e}),Jn=e=>_.get("/project",{params:{project_id:e}}),Hc=e=>_.post("/project/change_group",e),zc=e=>_.get("/doc/trash",{params:{project_id:e}}),Zc=e=>_.get("/project/without_members",{params:{project_id:e}}),mt={id:0,name:"\u6240\u6709\u9879\u76EE"},Mt=ge({id:"projects",state:()=>({projectGroupList:[],activeGroup:C.get(C.KEYS.ACTIVE_PROJECT_GROUP)||mt}),getters:{},actions:{async getProjectGroupList(){const{data:e=[]}=await Gn()||{};this.projectGroupList=e},switchProjectGroup(e=mt){C.set(C.KEYS.ACTIVE_PROJECT_GROUP,e),this.activeGroup=e},async addProjectGroup(e){const t=await Vn(e);return t&&this.projectGroupList.push(t.data),t},async renameProjectGroup(e){const t=await Yn(e);if(t){const o=this.projectGroupList.find(s=>s.id==e.id);o.name=e.name}return t},async deleteProjectGroup(e){const t=await Un(e.id);return this.projectGroupList=this.projectGroupList.filter(o=>o.id!==e.id),this.activeGroup.id===e.id&&this.switchProjectGroup(),t},async sortProjectGroup(e,t){const o=this.projectGroupList.splice(e,1)[0];this.projectGroupList.splice(t,0,o),await Kn(this.projectGroupList.map(s=>s.id))}}}),Hn={data(){return{title:"",isShow:!1,isLoading:!1,isEdit:!1,form:{name:""},categoryInfo:null,rules:{name:{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0",trigger:"blur"}}}},watch:{isShow:function(){this.isShow&&(this.title=`${this.isEdit?"\u7F16\u8F91":"\u6DFB\u52A0"}\u5206\u7EC4`),!this.isShow&&this.reset()}},methods:re(P({},uo(Mt,["addProjectGroup","renameProjectGroup"])),{show(e){this.isEdit=!!e,e?(this.categoryInfo=e,this.form=P({},e)):this.form.name="",this.isShow=!0,this.focus()},hide(){this.isShow=!1},onCloseBtnClick(){this.isShow=!1,this.reset()},reset(){this.$refs.teamForm.resetFields()},handleSubmit(e){this.$refs[e].validate(t=>t&&this.submit())},submit(){this.isLoading=!0,(this.isEdit?this.renameProjectGroup:this.addProjectGroup)(this.form).then(t=>{this.$Message.success(t.msg||`${this.isEdit?"\u7F16\u8F91":"\u6DFB\u52A0"}\u5206\u7EC4\u6210\u529F!`),this.onCloseBtnClick()}).finally(()=>{this.isLoading=!1}).catch(t=>{})},focus(){setTimeout(()=>this.$refs.input.focus(),200)}})},zn=R(" \u53D6\u6D88 "),Zn=R(" \u786E\u5B9A ");function Qn(e,t,o,s,n,i){const r=f("el-input"),p=f("el-form-item"),l=f("el-form"),m=f("el-button"),j=f("el-dialog");return u(),V(j,{modelValue:n.isShow,"onUpdate:modelValue":t[4]||(t[4]=E=>n.isShow=E),width:340,"close-on-click-modal":!1,title:n.title,"append-to-body":"","custom-class":"show-footer-line"},{footer:d(()=>[c(m,{onClick:t[2]||(t[2]=E=>i.onCloseBtnClick())},{default:d(()=>[zn]),_:1}),c(m,{loading:n.isLoading,type:"primary",onClick:t[3]||(t[3]=E=>i.handleSubmit("teamForm"))},{default:d(()=>[Zn]),_:1},8,["loading"])]),default:d(()=>[c(l,{ref:"teamForm",model:n.form,rules:n.rules,"label-position":"top",style:{"margin-bottom":"-19px"},onSubmit:t[1]||(t[1]=he(E=>i.handleSubmit("teamForm"),["prevent"]))},{default:d(()=>[c(p,{label:"\u5206\u7EC4\u540D\u79F0",prop:"name",class:"hide_required"},{default:d(()=>[c(r,{type:"text",ref:"input",modelValue:n.form.name,"onUpdate:modelValue":t[0]||(t[0]=E=>n.form.name=E),placeholder:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0",maxlength:255},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}var Wn=F(Hn,[["render",Qn]]);const qn=(e=jo)=>({title:t,message:o,content:s,cb:n,onOk:i})=>(n=n||i,o=o||s,e({title:t,message:o,showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",beforeClose:function(r,p,l){r==="confirm"?(p.confirmButtonLoading=!0,Promise.resolve(n(l)).then(()=>l()).catch(m=>m).finally(()=>{p.confirmButtonLoading=!1})):l()}})),Bt=qn();function Xn(e,t){function o(){vt(async()=>{if(e=I(e),!e)return;(await M(()=>import("./sortable.esm.85cd8ec3.js"),[])).default.create(e,P({animation:200,delay:400,delayOnTouchOnly:!0},t))})}return{initSortable:o}}const $t=e=>(Te("data-v-a97b0cbc"),e=e(),Oe(),e),ei={class:"flex flex-col border divide-y bg-white"},ti=$t(()=>a("span",{class:"ml-1"},"\u6240\u6709\u9879\u76EE",-1)),oi=["onClick"],si=["title"],ni=$t(()=>a("span",{class:"ml-1"},"\u6DFB\u52A0\u5206\u7EC4",-1)),ii=R("\u91CD\u547D\u540D "),ri=R("\u5220\u9664 "),ai=K({setup(e){const t=Mt(),{activeGroup:o,projectGroupList:s}=le(t),n=w(null),i=w(!1),r=w(),p=w();let l=null;const m=A=>[{active:o.value.id===A}],j=()=>{var A;(A=n.value)==null||A.show()},E=A=>{t.switchProjectGroup(A)},g=(A,L)=>{l=L,r.value=A.currentTarget,i.value=!0},v=()=>{var A;l&&((A=n.value)==null||A.show(l))},S=()=>{l&&Bt({title:"\u5220\u9664\u63D0\u793A",content:`\u786E\u5B9A\u5220\u9664${l.name}\u5206\u7EC4\uFF1F`,onOk:()=>t.deleteProjectGroup(l).then(A=>{te.success(A.msg||"\u5220\u9664\u6210\u529F\uFF01")})})};At(r,A=>{var O,G;const k=A.target.parentNode,T=k.parentNode;((O=k==null?void 0:k.classList)==null?void 0:O.contains("el-icon__more"))||((G=T==null?void 0:T.classList)==null?void 0:G.contains("el-icon__more"))||(i.value=!1)});const{initSortable:W}=Xn(p,{draggable:".ac-group-nav__item",onEnd(A){t.sortProjectGroup(A.oldIndex,A.newIndex)}});return qe(async()=>{await t.getProjectGroupList(),W()}),po(()=>{l=null}),(A,L)=>{const k=f("el-icon"),T=f("el-popover");return u(),h(N,null,[c(Tt,null,{default:d(()=>[a("div",ei,[a("a",{class:$(["relative h-12 pl-6 flex items-center text-neutral-600 hover:text-neutral-900",m(0)]),href:"javascript:void(0);",onClick:L[0]||(L[0]=O=>E())},[c(k,null,{default:d(()=>[c(I(So))]),_:1}),ti],2),Y(a("div",{class:"divide-y ac-group-nav",ref_key:"sortableList",ref:p},[(u(!0),h(N,null,H(I(s),O=>(u(),h("a",{key:O.name,class:$(["relative flex pr-4 items-center justify-between text-neutral-600 hover:text-neutral-900 ac-group-nav__item",m(O.id)]),href:"javascript:void(0);"},[a("section",{class:"overflow-hidden flex items-center flex-1 h-12 pl-6",onClick:G=>E(O)},[c(k,null,{default:d(()=>[c(I(Lo))]),_:1}),a("span",{class:"ml-1 truncate",title:O.name},D(O.name),9,si)],8,oi),c(k,{onClick:G=>g(G,O),class:"ml-1 el-icon__more"},{default:d(()=>[c(I(Pt))]),_:2},1032,["onClick"])],2))),128))],512),[[ee,I(s).length]]),a("a",{class:"relative h-12 pl-6 flex items-center text-neutral-600 hover:text-neutral-900",href:"javascript:void(0);",onClick:j},[c(k,null,{default:d(()=>[c(I(Do))]),_:1}),ni])])]),_:1}),c(Wn,{ref_key:"addProjectCategoryModal",ref:n},null,512),c(T,{"popper-class":"ac-popper-menu",width:"auto",visible:i.value,"onUpdate:visible":L[1]||(L[1]=O=>i.value=O),"virtual-ref":r.value,"virtual-triggering":""},{default:d(()=>[a("ul",null,[a("li",{class:"ac-popper-menu__item",onClick:v},[c(k,{class:"mr-1"},{default:d(()=>[c(I(xo))]),_:1}),ii]),a("li",{class:"ac-popper-menu__item",onClick:S},[c(k,{class:"mr-1"},{default:d(()=>[c(I(Ro))]),_:1}),ri])])]),_:1},8,["visible","virtual-ref"])],64)}}});var ci=F(ai,[["__scopeId","data-v-a97b0cbc"]]);const li=()=>M(()=>import("./Projects.a6a52409.js"),["assets/Projects.a6a52409.js","assets/Projects.ff0ef135.css","assets/ImagePreview.aca73709.js","assets/ImagePreview.e9afec23.css","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),ui={path:"",name:"projects.index",meta:{title:"\u9879\u76EE\u5217\u8868"},component:li},di=[ui];var pi={path:"/projects",name:"projects",redirect:{name:"projects.index"},component:ci,children:di};const hi=()=>M(()=>import("./ProjectNav.2b3f3da3.js"),["assets/ProjectNav.2b3f3da3.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),_i=()=>M(()=>import("./ProjectSetting.0b1c9b18.js"),["assets/ProjectSetting.0b1c9b18.js","assets/ImagePreview.aca73709.js","assets/ImagePreview.e9afec23.css","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),mi=()=>M(()=>import("./ProjectMembers.b7f1ec72.js"),["assets/ProjectMembers.b7f1ec72.js","assets/vendor.2ee35ec0.js","assets/usePage.9fa89480.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),fi=()=>M(()=>import("./ProjectParam.5de45216.js"),["assets/ProjectParam.5de45216.js","assets/params.5984f49b.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),gi=()=>M(()=>import("./ProjectTrash.57f7bc35.js"),["assets/ProjectTrash.57f7bc35.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),Ft=[{path:"setting",name:"project.setting",component:_i,meta:{title:"\u9879\u76EE\u8BBE\u7F6E",role:[Z.MANAGER]}},{path:"members",name:"project.members",component:mi,meta:{title:"\u9879\u76EE\u6210\u5458",role:[Z.MANAGER,Z.DEVELOPER,Z.READER]}},{path:"params",name:"project.params",component:fi,meta:{title:"\u516C\u5171\u53C2\u6570",role:[Z.MANAGER,Z.DEVELOPER]}},{path:"trash",name:"project.trash",component:gi,meta:{title:"\u56DE\u6536\u7AD9",role:[Z.MANAGER,Z.DEVELOPER]}}],ft=is(Ft);var vi={path:"/project/:project_id",name:"project",component:hi,redirect:{name:"project.setting"},children:Ft};const Ai={data(){return{isShow:!1,isLoading:!1,isPoll:!1,title:"\u5BFC\u51FA\u9879\u76EE",params:{},exportList:[],jobParams:{id:null},currentConfig:null,timer:null}},watch:{isShow:function(){this.isShow||(this.clearTimer(),this.isLoading=!1)}},methods:{hide(){this.isShow=!1},show(e,t){this.clearTimer(),this.isShow=!0,this.exportList=t||[],this.params=e||{}},onItemClick(e){this.currentConfig=e||null,this.getImportJobId(this.buildParams(e))},getImportJobId(e){if(this.jobParams.id=null,!this.currentConfig||!this.currentConfig.action)return this.isLoading=!1,Promise.resolve();this.currentConfig.action(e).then(t=>{this.jobParams.id=t.data||null,this.isPoll=!0,this.getExecResult()}).catch(()=>{this.isLoading=!1})},clearTimer(){this.isLoading=!1,this.isPoll=!1},async exec(){if(!this.currentConfig||!this.currentConfig.getJobResult)return this.clearTimer(),Promise.resolve();this.isLoading=!0;try{const{data:e}=await this.currentConfig.getJobResult(this.params.project_id,this.jobParams.id);let t=e.description||"";if(e.result===me.FAIL&&this.isShow){this.isLoading=!1,this.$Message.error(t||"\u5BFC\u51FA\u5931\u8D25\uFF01"),this.clearTimer();return}if(e.result===me.WAIT&&this.isShow)return;e.result===me.FINISH&&this.isShow&&(this.$Message.success(t||"\u5BFC\u51FA\u5B8C\u6210\uFF01"),this.isLoading=!1,this.clearTimer(),this.hide(),e.url&&cs(e.url))}catch{this.clearTimer()}},async getExecResult(){for(;this.isPoll;)await this.exec(this.params),await yt(2e3)},buildParams(e){return this.params.type=e.type,this.params}},unmounted(){this.clearTimer()}},yi={class:"ac-project-export","element-loading-text":"\u5BFC\u5165\u4E2D\uFF0C\u8BF7\u52FF\u5173\u95ED\u7A97\u53E3\uFF01"},Ei=["onClick"],Ci=["src","alt"],wi={class:"mt-1.5"};function Ii(e,t,o,s,n,i){const r=f("el-dialog"),p=Be("loading");return u(),V(r,{modelValue:n.isShow,"onUpdate:modelValue":t[0]||(t[0]=l=>n.isShow=l),width:"fit-content","close-on-click-modal":!1,"append-to-body":"",title:n.title},{default:d(()=>[Y((u(),h("div",yi,[(u(!0),h(N,null,H(n.exportList,l=>(u(),h("div",{class:"ac-project-export-item",key:l.type},[a("div",{class:"ac-project-export-inner",onClick:m=>i.onItemClick(l)},[a("img",{src:l.icon,alt:l.text},null,8,Ci),a("p",wi,D(l.text),1)],8,Ei)]))),128))])),[[p,n.isLoading]])]),_:1},8,["modelValue","title"])}var bi=F(Ai,[["render",Ii],["__scopeId","data-v-22a7e993"]]);const ki={setup(){const e=Et({project:null,dom:null,isShow:!1,isLoading:!1,isLoadingResetPwd:!1,shareUrl:"",isShare:!1,password:"",copyText:"",copyTextEl:w()});return P({},Ct(e))},methods:{onShareStatusSwitch(e){this.project!==null&&(this.isLoading=!0,$n(this.project.id,Number(e)).then(({msg:t,data:o})=>{o=o||{},this.$Message.success(t||"\u64CD\u4F5C\u6210\u529F"),this.updateLinkAndPassword(o.link,o.secret_key),e?this.project.secret_key=o.secret_key:delete this.project.secret_key}).catch(t=>{this.isShare=!this.isShare}).finally(()=>{this.isLoading=!1}))},copy(){this.copyTextEl.select(),document.execCommand("copy")&&(this.copyText="\u590D\u5236\u6210\u529F",setTimeout(()=>{this.copyText=this.project.visibility===1?"\u590D\u5236\u94FE\u63A5":"\u590D\u5236\u94FE\u63A5\u548C\u5BC6\u7801"},2e3))},show(e={}){this.isShow=!0,this.project=e,this.copyText=e.visibility===1?"\u590D\u5236\u94FE\u63A5":"\u590D\u5236\u94FE\u63A5\u548C\u5BC6\u7801",e.visibility===0&&e.secret_key?this.isShare=!0:this.isShare=!1,this.updateLinkAndPassword(e.preview_link,e.secret_key)},updateLinkAndPassword(e,t){this.shareUrl=e||this.shareUrl,this.password=t||this.password,this.updateCopyText()},onResetPasswordBtnClick(){this.isLoadingResetPwd=!0,Fn(this.project.id).then(({data:e})=>{this.project.secret_key=e,this.updateLinkAndPassword(null,e)}).finally(()=>{this.isLoadingResetPwd=!1})},updateCopyText(){var e=[this.project.name?`\u300A${this.project.name}\u300B`:"",`\u94FE\u63A5\uFF1A${this.shareUrl}`];this.project.visibility!==1&&e.push(`\u5BC6\u7801\uFF1A${this.password}`),this.$nextTick(()=>{this.copyTextEl.value=e.join(`
`)})}}},Pi={key:0,class:"-m-4"},ji={key:1,class:"-m-4"},Si=a("div",{class:"flex-1"},[a("h4",null,"\u5F00\u542F\u5206\u4EAB"),a("div",{class:"ivu-list-item-meta-description"},"\u5F00\u542F\u5206\u4EAB\u540E\uFF0C\u83B7\u5F97\u94FE\u63A5\u7684\u4EBA\u53EF\u4EE5\u8BBF\u95EE\u9879\u76EE\u5185\u5BB9\u3002")],-1),Di=R("\u91CD\u7F6E\u5BC6\u7801"),xi={ref:"copyTextEl",style:{position:"fixed",left:"-9999px"}};function Ri(e,t,o,s,n,i){const r=f("el-button"),p=f("el-input"),l=f("el-form-item"),m=f("el-form"),j=f("el-switch"),E=f("el-divider"),g=f("el-dialog");return u(),V(g,{modelValue:e.isShow,"onUpdate:modelValue":t[4]||(t[4]=v=>e.isShow=v),width:540,"close-on-click-modal":!1,title:"\u5206\u4EAB\u9879\u76EE","append-to-body":""},{default:d(()=>[e.project&&e.project.visibility===1?(u(),h("div",Pi,[c(m,{"label-position":"top",class:"px-6 py-3"},{default:d(()=>[c(l,{label:""},{default:d(()=>[c(p,{readonly:"",modelValue:e.shareUrl,"onUpdate:modelValue":t[0]||(t[0]=v=>e.shareUrl=v)},{append:d(()=>[c(r,{type:"primary",onClick:i.copy},{default:d(()=>[R(D(e.copyText),1)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])):x("",!0),e.project&&e.project.visibility===0?(u(),h("div",ji,[a("div",{class:$(["px-6 flex items-center",{"py-3":!e.isShare,"pt-3":e.isShare}])},[Si,c(j,{loading:e.isLoading,modelValue:e.isShare,"onUpdate:modelValue":t[1]||(t[1]=v=>e.isShare=v),onChange:i.onShareStatusSwitch,"inline-prompt":"","active-text":"\u5F00","inactive-text":"\u5173"},null,8,["loading","modelValue","onChange"])],2),e.isShare?(u(),V(E,{key:0})):x("",!0),e.isShare?(u(),V(m,{key:1,"label-position":"top",class:"px-6"},{default:d(()=>[c(l,{label:"\u9879\u76EE\u94FE\u63A5"},{default:d(()=>[c(p,{readonly:"",modelValue:e.shareUrl,"onUpdate:modelValue":t[2]||(t[2]=v=>e.shareUrl=v)},{append:d(()=>[c(r,{type:"primary",onClick:i.copy},{default:d(()=>[R(D(e.copyText),1)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1}),c(l,{label:"\u5BC6\u7801"},{default:d(()=>[c(l,{prop:"date",class:"mr-1"},{default:d(()=>[c(p,{readonly:"",modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=v=>e.password=v)},null,8,["modelValue"])]),_:1}),c(r,{loading:e.isLoadingResetPwd,onClick:i.onResetPasswordBtnClick},{default:d(()=>[Di]),_:1},8,["loading","onClick"])]),_:1})]),_:1})):x("",!0)])):x("",!0),a("textarea",xi,null,512)]),_:1},8,["modelValue"])}var Li=F(ki,[["render",Ri]]);const it=ge({id:"project",state:()=>({projectInfo:null}),getters:{isManager:e=>e.projectInfo&&e.projectInfo.authority===Z.MANAGER,isDeveloper:e=>e.projectInfo&&e.projectInfo.authority===Z.DEVELOPER,isReader:e=>e.projectInfo&&e.projectInfo.authority===Z.READER},actions:{async getProjectDetail(e){const{data:t}=await Jn(e);return this.projectInfo=t||null,this.projectInfo},async updateProjectInfo(e){const t=await Bn(e);return this.projectInfo=P(P({},this.projectInfo),e),t},clearProjectInfo(){this.projectInfo=null}}});const Ni=K({setup(e){return(t,o)=>{const s=f("el-icon"),n=f("el-backtop");return u(),V(n,ho(t.$attrs,{class:"ac-backtop"}),{default:d(()=>[c(s,null,{default:d(()=>[c(I(No))]),_:1})]),_:1},16)}}});var Ti=F(Ni,[["__scopeId","data-v-de5b7756"]]);const Qc=e=>_.post("/preview/single_check",e),Oi=(e,t)=>_.get("/preview/single_doc",{params:{doc_id:t,token:e}}),Wc=(e,t)=>_.get("/api_doc",{params:{project_id:e,doc_id:t,deleted:1,format:"html"}}),Mi=e=>_.get("/preview/project",{params:{project_id:e}}),qc=(e,t)=>_.get("/preview/api_nodes",{params:{project_id:t,token:e}}),Xc=e=>_.post("/preview/check",e),el=(e,t,o)=>_.get("/preview/api_doc",{params:{project_id:t,node_id:o,token:e}}),Bi=(e,t,o)=>_.get("/preview/search",{params:{project_id:t,keywords:o,token:e}});var Vt="/assets/icon-no-result.4a7ec4ce.png";const $i={name:"ProjectSearch",data(){return{data:[],isLoading:!1,isNoData:!1,isShowSearchResult:!1,form:{token:C.get(C.KEYS.SECRET_PROJECT_TOKEN+this.$route.params.project_id||"",!0),project_id:this.$route.params.project_id,keywords:""}}},methods:{onClickSearchResult(e){let t=!1;ie(o=>{if(o.id===(e.node_id||e.doc_id))return t=!0,!1},[]),t?this.$router.push(e.link):location.href=e.href},onStop(e){e.stopPropagation()},onSearchDocument:Xe(function(){!_o(wt(this.form.keywords))&&this.form.keywords.length>=2&&(this.isLoading=!0,this.data=[],this.isShowSearchResult=!0,Bi(this.form.token,this.form.project_id,this.form.keywords).then(e=>{this.data=(e.data||[]).map(t=>(t.link={name:"preview.project.document",params:{project_id:this.form.project_id,node_id:t.node_id||t.doc_id}},t.href=`/app/${this.form.project_id}/${t.node_id||t.doc_id}`,t)),this.isNoData=!this.data.length}).finally(()=>{this.isLoading=!1}))},300)},created(){document.body.addEventListener("click",e=>{this.data=[],this.form.keywords="",this.isShowSearchResult=!1})}},Fi={class:"search-popper-input"},Vi=a("i",{class:"icon iconfont iconsousuo"},null,-1),Gi={style:{padding:"10px","text-align":"center"}},Ui={key:0},Yi=["onClick","title"],Ki={key:1,class:"result p-2"},Ji=a("div",{class:"result-icon"},[a("img",{src:Vt,alt:""})],-1),Hi=a("span",null,"\u672A\u627E\u5230\u641C\u7D22\u7ED3\u679C\uFF01",-1),zi=[Ji,Hi];function Zi(e,t,o,s,n,i){return u(),h("div",{class:"search-popper",onClick:t[3]||(t[3]=(...r)=>i.onStop&&i.onStop(...r))},[a("div",Fi,[Y(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>n.form.keywords=r),placeholder:"\u641C\u7D22",maxlength:"255",onKeyup:t[1]||(t[1]=bt((...r)=>i.onSearchDocument&&i.onSearchDocument(...r),["enter"]))},null,544),[[It,n.form.keywords]]),Vi]),Y(a("div",{class:"search-popper-result scroll-content",onClick:t[2]||(t[2]=(...r)=>i.onStop&&i.onStop(...r))},[Y(a("div",Gi,"\u641C\u7D22\u4E2D...",512),[[ee,n.isLoading]]),n.data.length?(u(),h("ul",Ui,[(u(!0),h(N,null,H(n.data,r=>(u(),h("li",{key:r.node_id},[a("a",{href:"javascript:void(0);",onClick:p=>i.onClickSearchResult(r),title:r.title},D(r.title),9,Yi)]))),128))])):x("",!0),n.isNoData?(u(),h("div",Ki,zi)):x("",!0)],512),[[ee,n.isShowSearchResult]])])}var Qi=F($i,[["render",Zi]]);const Wi={name:"PreviewHeader",props:{isShowSearch:{type:Boolean,default:!0}},components:{ProjectSearch:Qi}},qi={class:"header header-fixed"},Xi=mo('<a class="logo" href="/"><img src="'+be+'" alt="ApiCat"><span class="logo"><span class="logo-text logo-apicat">ApiCat</span></span></a><ul class="header-nav"></ul>',2);function er(e,t,o,s,n,i){const r=f("project-search");return u(),h("header",qi,[Xi,o.isShowSearch?(u(),V(r,{key:0})):x("",!0)])}var tr=F(Wi,[["render",er]]);const rt=K({setup(e){const t=w(!0),o=w(!0),s=i=>{t.value=i},n=i=>{o.value=i};return pe("showSearchInput",s),pe("showHeader",n),(i,r)=>{const p=f("router-view"),l=Ti;return u(),h(N,null,[o.value?(u(),V(tr,{key:0,"is-show-search":t.value},null,8,["is-show-search"])):x("",!0),c(p),c(l,{bottom:100,right:100})],64)}}}),or=()=>M(()=>import("./ProjectPreview.7efc4a1e.js"),["assets/ProjectPreview.7efc4a1e.js","assets/vendor.2ee35ec0.js","assets/AcEditorDocument.c5ac7902.js","assets/useHighlight.10314a85.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),sr=()=>M(()=>import("./ProjectVerification.025fa4cc.js"),["assets/ProjectVerification.025fa4cc.js","assets/img_join.8db8ddd5.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),nr=()=>M(()=>import("./DocumentPreview.6fc027d8.js"),["assets/DocumentPreview.6fc027d8.js","assets/AcEditorDocument.c5ac7902.js","assets/vendor.2ee35ec0.js","assets/useHighlight.10314a85.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),ir=()=>M(()=>import("./DocumentVerification.2caba689.js"),["assets/DocumentVerification.2caba689.js","assets/img_join.8db8ddd5.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),rr=()=>M(()=>import("./TrashDocumentPreview.7cb1cdf8.js"),["assets/TrashDocumentPreview.7cb1cdf8.js","assets/AcEditorDocument.c5ac7902.js","assets/vendor.2ee35ec0.js","assets/useHighlight.10314a85.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),ar=et("/app/:project_id"),tl=et("/doc/:project_id/trash_api_preview/:doc_id"),cr={path:"/doc",name:we,component:rt,meta:{ignoreAuth:!0},children:[{path:"/doc/:doc_id/verification",name:Le,component:ir,meta:{ignoreAuth:!0}},{path:"/doc/:doc_id",name:`${we}.detail`,component:nr,meta:{ignoreAuth:!0}}]},lr={path:"/app",name:Ce,component:rt,meta:{ignoreAuth:!0},children:[{path:"/app/:project_id/verification",name:Re,component:sr,meta:{ignoreAuth:!0}},{path:"/app/:project_id/:node_id?",name:`${Ce}.document`,component:or,meta:{ignoreAuth:!0}}]},ur={path:"/doc/:project_id/trash_api_preview/:doc_id",name:"preview.trash",component:rt,children:[{path:"",name:"preview.trash.document",component:rr}]};var Gt="/assets/logo-apicat@2x.ca5d403d.png",dr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAJiElEQVR4Xu2de4xU5RnGn+/Msgu7zMzusgGJlUiCCZcELbFJi7GJtrShtgs21RJMi4tim0aqmF5iayMtsTQkbbdYtNTSKtYorpWGmOItqESwaKDEFhURpFsKre7szsyZ3dlhZ87bnDNd3MvMzvnO9ZvZ9/zH8j7v937P8+NcdoYZARcHEcWSur4OhBUA5gNoIyLhomXVSJ996eDjq69fvrpqBi4zqOOwkkn9RhL0ABHNqHYTnMz/SNczmNXWWvUQOAKgL5W6gwidToyrFY0JgHlUOwTSAPTp+jUw6EUi0molTCf7GAag2iGQAsC8vidT+lECLXZiWi1pRgJQzRBIAZBOp5fmDTpQS0E63ctYAKoVAikA+lKpjUS416lptaQrBUA1QiAHQDK9g0BraylIp3spB0C1QSALwJMEusGpabWkmwiAaoKAAXBIZSUAqgUCBsBHAKoBAgbAZwBUh4ABCAAAlSFgAAICQFUIGIAAAVARAgYgYABUg4ABCAEAlSBgAEICQBUIGIAQAVABAgYgZADChoABUACAMCFgABQBICwIGACFAAgDAgZAMQCChoABcAjAY7ufRT6fd6iuLAvq3cYMQOUsSlb8+blXkErrDtX2ZEFAwADYy2Jc1etHj+HtE+87VNuX+Q0BA2A/i1GVybSOPc/vBxE57GBf5icEDID9HMZVHjryd7xz8p8uOtiX+gUBA2A/g3GVhmHghf2H8J8PEy662Jf6AQEDYN//kpUmBG8cPYbjp7qr8nLAALgEYFhu3hO8e6obZ//bg/6BbNU8IjIAHgEwtk2mP4v+7KBP3YEF8y6Vyq7cIFJN+pJp/o8hEpH6CQEDIBFEmKV+QcAAhJmq5Np+QMAASIYQdrnXEDAAYSfqYH0vIWAAHASggsQrCBgAFdJ0OIMXEDAADs1XReYWAgZAlSRdzOEGAgbAhfEqSZ1CwAColKLLWZxAwAC4NF01uSwEDIBqCXowjwwEDIAHhqvYwi4EDICK6Xk0kx0IGACPzFa1TSUIGABVk/NwrokgYAA8NFrlVuUgYABUTs3j2UpBwAB4bLLq7cZCwAConpgP842EgAHwweBqaDkMAQNQDWn5NKMJwZyLL5J6R3e5UaSa8NvCfUrUQdvW5rhUdgyAA5NVljAAKqcTwGwMQAAmq7wEA6ByOgHMxgAEYLLKSzAAKqcTwGwMQAAmq7yE5wAkOlZ83iD6IYiWAGhSefNVOVusGWLeQogVqyCaW11vwVMAejra15BBD7ueihtUdqBxOrTv/9Q1BJ4BQLfd1pjInTtHQKzy9FzhhQNiyVJoa77lqpVnAPSuab+qAHrV1TQslnMg1ozIpl/LacZUewZA4ub2GwyiJ11Nw2JpByK/+qO0ZqSAAXBlX/hiBiD8DEKdgAEI1f7wF2cAws8g1AkYgFDtD39xBiD8DEKdgAEI1f7wF2cAws8g1AkYgFDtD3/xmgWg/spPYerVy0o6TNkBFBIfoHD2DHKH9gNjvnUruv5uiLopo7VEKPQlUDh3BoWz/0L+vXdAg9mS/UvqS1Tmz5zGQNfOUCmoWQCmLb8eTV/tqGhuobcHmR1bMXTs6IXaGdu7IBoaJtRauoe3YejNw+Pq7OhN0dDxfyC1+QcVZ/SzYFIAMLB3N8x/9dYhAK1xOiJz5qJ+wWLrR0ZGR/Ke9TCSvdafhwPMnz6J3JG/FmX19Yi0zYQ2czbq5l4GIYpvhzd7D+z6w6iMSulLhWj0fIDcwZf8zLdi70kBQO9da2H09owzo+GqaxFdd6f18/6nHkX2ma5RAAzufwGZ398/TmcC0PT1b2LK3Musr2dJ/eQ7yL9/YtwZpJy+YioBFkxqAEyfWx98Atq0Rgy+9goy239uCwDrjBCNo2XLdks7dOpdC4LhY/gMwADYJ1l4/XLwyHuAcmcANEzFjK07IRqmInf4Nej3b7YNgFnYuHI1GleusjSJ228CZYrf4MkA2A9+uDIUABqu/iyit3y7eC3fswsDTz8mFWD9FZ9A7M4fWZrkpu8if/L4KH3ujYPof6r8Xb7RlwDO5+Td8lAxKS4B6a33wUinLtgmmqKou+RSTFv2RWjxFlChgJQZ4On3pACIXDwHLfcV31Gj//aXF27o7D4FpH7x45JPER7mW7HVpABgIhfMm7iBrkeQ/cvT0tdw84mgdct2S2c+Eg6+/NwogCq5zwB85JCvlwDKDwEjvlqXsv0o9HyIwtluZPfuRuHf3aOysnsNn7LwcsS/t8nSprbcg6G33hx9BjmwD5mdvynPwfnzABmVOPH17yfFGaDsTWAZa+0CMPUz12H6175hdRm5hl29r8nabM4AlDDKVoCROrRs3obIzNnWL5B6N3QA//8Gb1t6mwH5XcYAOAGgvh5Nq9Zi2rVfKN4APtSJ3IF90vcQfodrpz8DMAEA5q+Bs3t2FSummL8KnoXIrNlo+PQyRFrbrB8PnTxuPUGMPPgMYAe90TW+3gQ6vQeYaBvm08Pgvr3WE8TYVwUZgBoFwHwF0Hwp2HxJOPf6q8ifeLvkThkABQCQH2FyKmr2HmByxim/awZA3rOaUjAANRWn/GYYAHnPakrBANRUnPKbYQDkPaspBQNQU3HKb0YZAHpubv8yEf1JfguscOyAEIh0PupYbgq9+4SQjhULDcM45moaFks5IC76GLS7fyalGVvsGQC0caPWc/rIYRBd4WoiFtt2QLvuKxCfW2m7vlShZwCYzRPrvrSIhsReIrrE1VQsruzAoo8jcusGQNMq105Q4SkAFgTrb4qRnl4DaEsAKvlJoWLe/E/S9BhD4iQ665NCF0AsvtKJepzGcwDsTMVfGWPHpWBqGIBgfFZ2FQZA2WiCGYwBCMZnZVdhAJSNJpjBGIBgfFZ2FQZA2WiCGYwBCMZnZVdhAJSNJpjBGIBgfFZ2FQZA2WiCGYwBCMZnZVdhAJSNJpjBwgJgB4HWBrNFXmUCBzKtzfGoFw4VP3XR5tGX0u8lMjbaLOcyvxwQ4q3WeGyRF+2lAEin00vzBh3wYmHu4dwBIbTOlnh0g/MOHymlACAiLZnS/0ag4me98hG4A0IIo04Ti6PRqCfv45QCwNxtn65fA4NeNGEIfPe8IITAtpZ4/HavrJAGwIIglbqDCJ1eDcF97DkgIPY1x6PLhRDn7SkqVzkCwGybTOo3kqAHiGhG5WW4wo0D5mkfoAebY7G7vAzfnMkxAKa4lyiu6fo6IrQDmA+gjYhc9XRjVI1pMxCiW0A8X6fhd15d88d69D+MM3rbPGNofwAAAABJRU5ErkJggg==",Ut="/assets/logo-postman@2x.3bda39f9.png";const Fe=(e={})=>_.post("/api_doc/export",e),Ve=(e,t)=>_.get("/api_doc/export_result",{params:{project_id:e,job_id:t}}),Yt=[{text:"ApiCat",icon:Gt,type:"apicat",action:Fe,getJobResult:Ve},{text:"PDF",icon:dr,type:"pdf",action:Fe,getJobResult:Ve},{text:"Postman(v2.1)",icon:Ut,type:"postman",action:Fe,getJobResult:Ve}],pr=Yt;const hr={props:{status:{type:String,default:()=>"success",validate(e){return["success","error"].indexOf(e)!==-1}},title:{type:String,default:()=>""},subTitle:{type:String,default:()=>""},styles:{type:Object,default:()=>({})}}},_r={class:"result"},mr={class:"result-title"},fr={class:"mt-1 result-subtitle"};function gr(e,t,o,s,n,i){return u(),h("div",_r,[a("div",{class:"result-icon",style:fo(o.styles)},[xe(e.$slots,"icon",{},void 0,!0)],4),xe(e.$slots,"title",{},()=>[a("p",mr,D(o.title),1)],!0),a("p",fr,[xe(e.$slots,"subTitle",{},()=>[R(D(o.subTitle),1)],!0)])])}var vr=F(hr,[["render",gr],["__scopeId","data-v-a27469de"]]),Ar="/assets/logo-markdown@2x.084fed6d.png";const ol=e=>_.get("/api_url/list",{params:{project_id:e}}),sl=(e,t)=>_.post("/api_url/remove",{project_id:e,url_id:t}),nl=(e,t,o="json")=>_.get("/api_doc",{params:{project_id:e,doc_id:t,format:o}}),yr=(e,t)=>_.get("/api_doc/search",{params:{project_id:e,keywords:t}}),Er=(e={})=>_.post("/api_doc/create",P({},e)),Cr=(e={})=>_.post("/api_doc/http_template",P({},e)),il=(e={})=>(typeof e.content=="object"&&(e.content=JSON.stringify(e.content)),_.post("/api_doc/update",e)),wr=(e={})=>_.post("/api_doc/copy",e),Ir=(e={})=>_.post("/api_doc/rename",e),br=(e={})=>_.post("/api_doc/remove",e),kr=(e={})=>_.post("/api_doc/share",P({},e)),Pr=(e={})=>_.post("/api_doc/share_detail",P({},e)),jr=(e={})=>_.post("/api_doc/share_secretkey",P({},e)),Ge=e=>_.post("/api_doc/import",e),Ue=(e,t)=>_.get("/api_doc/import_result",{params:{project_id:e,job_id:t}}),Sr=[{text:"ApiCat",icon:Gt,type:"apicat",action:Ge,getJobResult:Ue,maxSize:2,accept:".json"},{text:"Markdown",icon:Ar,type:"markdown",action:Ge,getJobResult:Ue,maxSize:.5,accept:".md"},{text:"Postman(v2.1)",icon:Ut,type:"postman",action:Ge,getJobResult:Ue,maxSize:2,accept:".json"}],Dr=(e={})=>_.post("/dir/create",e),xr=(e={})=>_.post("/dir/remove",e),Rr=(e={})=>_.post("/dir/rename",e),Lr=(e={})=>_.post("/api_tree/sort",e),Nr=e=>_.get("/api_tree",{params:{project_id:e}}),rl=e=>_.get("/dir/list",{params:{project_id:e}}),Se=(e={},t=fe.DOC)=>re(P({},e),{type:e.type===void 0?t:e.type,isEditable:!1,isCurrent:!1,isLeaf:(e.type===void 0?t:e.type)===fe.DOC}),Kt=ge({id:"document",state:()=>({apiDocTree:[]}),getters:{},actions:{async getApiDocTree(e){if(!e)return[];try{const{data:t}=await Nr(e);this.apiDocTree=ie(o=>(o.isLeaf=o.type===fe.DOC,o.isEditable=!1,o.isCurrent=!1,o),t||[],{subKey:"sub_nodes"})}catch{}return this.apiDocTree}}});const Jt=e=>(Te("data-v-7f635b5e"),e=e(),Oe(),e),Tr={class:"search-result scroll-content text-left"},Or=["onClick"],Mr={class:"truncate px-2 hover:bg-gray-100"},Br=Jt(()=>a("img",{src:Vt},null,-1)),$r=Jt(()=>a("span",null,"\u672A\u627E\u5230\u641C\u7D22\u7ED3\u679C\uFF01",-1)),Fr=K({setup(e,{expose:t}){const{params:o}=kt(),{push:s}=Ie(),{apiDocTree:n}=le(Kt()),i=w(!1),r=w(!1),p=w(!1),l=w(""),m=w([]),j=w(),E=w(),g=w(),v=w();At(j,()=>{i.value=!1,W()},{ignore:[v]});const S=Xe(()=>{const k=I(l);k.length<2||(r.value=!0,p.value=!0,yr(o.project_id,k).then(T=>{m.value=T.data||[]}).catch(T=>{}).finally(()=>{p.value=!1}))},200),W=()=>{m.value=[],l.value="",r.value=!1},A=k=>{let T=null;ie(G=>{if(G.id===parseInt(k.node_id,10))return T=G,!1},n.value||[],{subKey:"sub_nodes"});const O=lc({project_id:o.project_id,node_id:k.node_id});T?s({path:O}):location.href=O};return t({show:k=>{v.value=k,i.value=!0,g.value.focus()}}),(k,T)=>{const O=f("el-input"),G=vr,ve=f("el-popover"),U=Be("loading");return u(),V(ve,{visible:i.value,"onUpdate:visible":T[1]||(T[1]=q=>i.value=q),ref_key:"popoverRef",ref:E,placement:"bottom-end","virtual-ref":v.value,"virtual-triggering":"",width:"auto"},{default:d(()=>[a("div",{ref_key:"searchDomRef",ref:j,class:"search-poptip"},[c(O,{ref_key:"searchInput",ref:g,"suffix-icon":I(jt),placeholder:"\u5173\u952E\u5B57 \u56DE\u8F66\u641C\u7D22",modelValue:l.value,"onUpdate:modelValue":T[0]||(T[0]=q=>l.value=q),onChange:I(S),clearable:""},null,8,["suffix-icon","modelValue","onChange"]),Y((u(),h("div",Tr,[(u(!0),h(N,null,H(m.value,(q,$e)=>(u(),h("span",{class:"cursor-pointer",key:q.doc_id+"_"+$e,onClick:at=>A(q)},[a("h4",Mr,D(q.title),1)],8,Or))),128)),Y(c(G,null,{icon:d(()=>[Br]),title:d(()=>[$r]),_:1},512),[[ee,r.value&&!p.value&&!m.value.length]])])),[[ee,r.value],[U,p.value]])],512)]),_:1},8,["visible","virtual-ref"])}}});var Vr=F(Fr,[["__scopeId","data-v-7f635b5e"]]);const Gr={class:"ac-doc-header"},Ur={class:"ac-doc-header-inner"},Yr={class:"w-full relative text-center"},Kr=R(" \u8FD4\u56DE "),Jr={class:"h-14 text-base font-medium"},Hr={class:"flex items-center justify-center h-full max-w-sm m-auto cursor-pointer hover:text-zinc-600"},zr={class:"truncate"},Zr=["onClick"],Qr={class:"absolute right-0 top-0 h-full flex items-center text-zinc-500"},Wr=R("\u641C\u7D22 "),qr=R("\u9884\u89C8\u9879\u76EE "),Xr=R("\u5206\u4EAB "),ea=K({setup(e){const{push:t,currentRoute:o}=Ie(),s=it(),{projectInfo:n,isManager:i}=le(s),r=w(),p=w(),l=He("projectExportModal"),m=ar({project_id:o.value.params.project_id}),j=A=>{if(A.href){t(A.href.replace("{project_id}",o.value.params.project_id));return}},E=A=>{var L;(L=p.value)==null||L.show(A.currentTarget)},g=()=>{var A;(A=l.value)==null||A.show({project_id:n.value.id},Yt)},v=()=>{var A;(A=r.value)==null||A.show(n.value)},S=[{text:"\u516C\u5171\u53C2\u6570",icon:"iconIconPopoverConfig",href:"/project/{project_id}/params"},{text:"\u9879\u76EE\u8BBE\u7F6E",icon:"iconIconPopoverSetting",href:"/project/{project_id}/setting"},{text:"\u9879\u76EE\u6210\u5458",icon:"iconIconPopoverUser",href:"/project/{project_id}/members"},{text:"\u5BFC\u51FA\u9879\u76EE",icon:"iconIconPopoverUpload",onClick:A=>g(),divided:!0},{text:"\u56DE\u6536\u7AD9",icon:"icontrash",href:"/project/{project_id}/trash"}],W=w(S);return gt(n,()=>{n.value&&!i.value&&(W.value=S.filter(A=>A.icon!=="iconIconPopoverSetting"))},{immediate:!0}),(A,L)=>{const k=f("el-icon"),T=f("router-link"),O=f("el-popover"),G=f("el-divider"),ve=Li;return u(),h(N,null,[a("header",Gr,[a("div",Ur,[a("div",Yr,[c(T,{class:"absolute left-0 top-0 h-full flex items-center text-zinc-500",to:{name:"projects"}},{default:d(()=>[c(k,{class:"mr-1"},{default:d(()=>[c(I(To))]),_:1}),Kr]),_:1}),a("div",Jr,[c(O,{placement:"bottom",trigger:"click","popper-class":"ac-popper-menu ac-popper-menu--small",width:"auto"},{reference:d(()=>{var U;return[a("div",Hr,[a("p",zr,D((U=I(n))==null?void 0:U.name),1),Y(c(k,{size:12,class:"ml-1"},{default:d(()=>[c(I(Oo))]),_:1},512),[[ee,I(n)]])])]}),default:d(()=>[a("ul",null,[(u(!0),h(N,null,H(W.value,U=>(u(),h("li",{key:U.icon,class:$(["ac-popper-menu__item",{"border-t":U.divided}]),onClick:q=>U.onClick?U.onClick(U):j(U)},[a("i",{class:$(["icon iconfont mr-1",U.icon])},null,2),R(D(U.text),1)],10,Zr))),128))])]),_:1})]),a("div",Qr,[a("a",{class:"flex items-center h-full",href:"javascript:void(0)",onClick:E},[c(k,{class:"mr-2"},{default:d(()=>[c(I(jt))]),_:1}),Wr]),c(G,{class:"mx-5",direction:"vertical"}),c(T,{class:"flex items-center",to:{path:I(m)},target:"_blank"},{default:d(()=>[c(k,{class:"mr-2"},{default:d(()=>[c(I(Mo))]),_:1}),qr]),_:1},8,["to"]),c(G,{class:"mx-5",direction:"vertical"}),a("a",{class:"flex items-center",href:"javascript:void(0)",onClick:v},[c(k,{class:"mr-2"},{default:d(()=>[c(I(Bo))]),_:1}),Xr])])])])]),c(ve,{ref_key:"projectShareModal",ref:r},null,512),c(Vr,{ref_key:"searchDocumentPopoverRef",ref:p},null,512)],64)}}}),ta={emits:["on-menu-item-click"],name:"NewMenus",props:{node:{type:Object,default:()=>({})}},setup(){return{menus:zt}},methods:{onPopperItemClick(e){nt(this,"on-menu-item-click",e)}}},oa={class:"ac-popper-menu"},sa=["onClick"],na=["src"];function ia(e,t,o,s,n,i){return u(),h("ul",oa,[(u(!0),h(N,null,H(s.menus,r=>(u(),h(N,{key:r.value},[o.node.level<5||o.node.level===5&&r.value!=="newCatetory"?(u(),h("li",{key:0,class:$(["ac-popper-menu__item",{"border-t":r.divided}]),onClick:he(p=>i.onPopperItemClick(r),["stop"])},[r.icon?(u(),h("span",{key:0,class:$(["icon iconfont ac-popper-menu__icon",r.icon])},null,2)):x("",!0),r.img?(u(),h("img",{key:1,class:"ac-popper-menu__icon",src:r.img,alt:""},null,8,na)):x("",!0),R(D(r.text),1)],10,sa)):x("",!0)],64))),128))])}var ra=F(ta,[["render",ia]]);const aa={name:"DirOperateMenus",data(){return{menus:ya}},methods:{onPopperItemClick(e){nt(this,"on-menu-item-click",e)}}},ca={class:"ac-popper-menu ac-popper-menu--thin"},la=["onClick"];function ua(e,t,o,s,n,i){return u(),h("ul",ca,[(u(!0),h(N,null,H(n.menus,r=>(u(),h("li",{class:$(["ac-popper-menu__item",{"border-t":r.divided}]),key:r.value,onClick:he(p=>i.onPopperItemClick(r),["stop"])},D(r.text),11,la))),128))])}var da=F(aa,[["render",ua]]);const pa={emits:["on-menu-item-click"],name:"DocOperateMenus",props:{node:{type:Object,default:()=>({})},source:{type:Object,default:()=>({})},isDetailPage:{type:Boolean,default:!1}},data(){return{menus:Qe}},methods:{onPopperItemClick(e){nt(this,"on-menu-item-click",e)}}},ha={class:"ac-popper-menu ac-popper-menu--thin"},_a=["onClick"],ma=["onClick"],fa=["onClick"];function ga(e,t,o,s,n,i){return u(),h("ul",ha,[(u(!0),h(N,null,H(n.menus,r=>(u(),h(N,null,[(r.value==="delete"||r.value==="export"||r.value==="share"||r.value==="copy")&&o.isDetailPage&&o.source.isCurrent?(u(),h("li",{class:$(["ac-popper-menu__item",{"border-t":r.divided}]),key:r.value,onClick:he(p=>i.onPopperItemClick(r),["stop"])},D(r.text),11,_a)):x("",!0),r.value==="delete"&&!o.isDetailPage&&o.source.isCurrent?(u(),h("li",{class:$(["ac-popper-menu__item",{"border-t":r.divided}]),key:r.value,onClick:he(p=>i.onPopperItemClick(r),["stop"])},D(r.text),11,ma)):x("",!0),o.source.isCurrent?x("",!0):(u(),h("li",{class:$(["ac-popper-menu__item",{"border-t":r.divided}]),key:r.value,onClick:he(p=>i.onPopperItemClick(r),["stop"])},D(r.text),11,fa))],64))),256))])}var va=F(pa,[["render",ga]]),Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAgoAMABAAAAAEAAAAgAAAAAL5bTO0AAAIwaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K9GTeTwAAAW9JREFUWAntVLtKQ0EQvWsUi0AKtRFESaWlP2Nl/AMLK62sbExhlz+I8XusxE6sfRRBCxuv50guXJKZfS8IZuBw787ZmTk7+6iq/25GacA5/IcKZ3O/gxwBj7ZJbW6lPWj9xxRn+AZwARxw4GNaB+5mwWN8nx2J9sEfAVz9N7AFfAFDwNmJVUyyGYs/2CaA6874D3xvgEuAItgJpwhtCxAbZS+IugJegXXAuR25BaBmFSSihIAgEaUESCJO6Zw31yGcn28bb4O8FiY0i+QVXbAcAp6QlddvDdhdqOBw5BDAE38G9JVaO/DznRAthwAmpghCsk/J2fia/WnGoV++pEk5UjtQQwARbb7qO9EVHIG+ApJWadPgK4DXrIj5CihSnEmXApYdCOpAXdfm9vitp51Icpyj8ZI/6CU0xvA9mEqJ6BtMNqeDicbK/qAOyCnSvK4O7KWl/4225nAJOMkgwJpC24J7a1QcWSJnnJI/FfUDsbg5OtwYRrcAAAAASUVORK5CYII=",Aa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABZUlEQVRYR+3XMUvEMBTA8X9uvkHE2wQRBMHJQScdHO4rCCL4DTp4izgoOLh4KBxSP4HgZ3AQXHRzcBJXXVxEHE8FI4EuXtt7LyGhg3ZsXvJ+eU3T1NDwZRrOTx1gB1gMwL0BOfCo7VsHuNAOUBH3ARxpERLgHHgSMPPAOuBm/w1MAWqEBDgEHgTAMtADnoETYN8HERuwC3R8ECkArmBqRCqAGpESMIpwizQbXU8xAV/AS8WCbQOTxf3NFAD32g2AlmLvSAJweR1itgYwXewTrjkZYNzkF4C9lI9AqnwEQGaXsFxJmX61G7rk5g6IAljBcuMJWCU3t3EALvO2nfACDMx7ER+hAl6ZS8ERAD07xyfHpaENQ3KzIfgiADK7huW6MtGZkY51EQAHts0r3RKgxZBTc5m+Ao2vgX/AX66A5lgu1WcG2Ar9GkqD+7arzwOhv2bjQPdAX3sk851ZcLy0jQYPrO34A6sFhSHFThBJAAAAAElFTkSuQmCC";const zt=[{text:"\u65B0\u5EFA\u6587\u6863",value:"createDoc",img:Ht,onClick:"createDoc"},{text:"\u65B0\u5EFA HTTP API \u6587\u6863",value:"createHttpDoc",img:Aa,onClick:"createHttpDoc"},{text:"\u5BFC\u5165\u6587\u4EF6",value:"importFile",icon:"iconimport",onClick:"onImportBtnClick",divided:!0},{text:"\u65B0\u5EFA\u5206\u7C7B",value:"newCatetory",type:"newCatetory",icon:"iconIconPopoverTree",onClick:"onCreateDirBtnClick",divided:!0}],Qe=[{text:"\u590D\u5236",value:"copy",onClick:"onCopyBtnClick"},{text:"\u91CD\u547D\u540D",value:"rename",onClick:"onRenameBtnClick"},{text:"\u5206\u4EAB",value:"share",onClick:"onShareBtnClick"},{text:"\u5BFC\u51FA",value:"export",onClick:"onExportBtnClick"},{text:"\u5220\u9664",value:"delete",onClick:"onDeleteBtnClick"}],ya=[Qe[1],Qe[4]],Ea="DIR_NEW_TYPE",Ca="DIR_OPERATE_TYPE",wa="DOC_OPERATE_TYPE";function Ye(e,t){const o=document.createElement("div"),s=go(e);return vo(s,o),Object.keys(t).forEach(n=>{s.component.props[n]=t[n]}),s}var Ia={[Ea]:{render(e){return Ye(ra,e)}},[Ca]:{render(e){return Ye(da,e)}},[wa]:{render(e){return Ye(va,e)}}},Ke={onPopperItemClick:ye,onPopperHide:ye,popper:Ao(document.body,{appendTo:()=>document.body,trigger:"manual",placement:"bottom",interactive:!0,theme:"light"}),show(e,t,o){const s=Ia[e];!s||(this.$vm=s.render(o),rs(this.$vm.component.proxy,"on-menu-item-click",n=>{this.onPopperItemClick(P({menu:n},o)),this.hide()}),this.popper.setProps({getReferenceClientRect:()=>t.getBoundingClientRect(),content:this.$vm.el,onHide:()=>{this.onPopperHide()}}),this.popper.show())},hide(){this.popper.hide()}};const ba={props:{shareData:{type:Object,default:()=>({docId:-1})}},watch:{shareData(){this.shareData.docId!==-1&&this.getShareDetail()}},setup(){const{currentRoute:e}=Ie(),t=Et({project_id:parseInt(e.value.params.project_id,10),document:null,isShow:!1,isShowDetail:!1,isLoading:!1,isLoadingResetPwd:!1,shareUrl:"",isShare:!1,password:"",copyText:"",copyTextEl:w()});return P({},Ct(t))},methods:{onShareStatusSwitch(e){this.document!==null&&(this.isLoading=!0,kr({project_id:this.project_id,doc_id:this.shareData.docId,share:e}).then(({data:t})=>{e?(this.updateLinkAndPassword(t.link,t.secret_key),this.document.secret_key=t.secret_key):(this.document.secret_key="",this.isShare=!1)}).catch(t=>{this.isShare=!this.isShare}).finally(()=>{this.isLoading=!1}))},copy(){this.copyTextEl.select(),document.execCommand("copy")&&(this.copyText="\u590D\u5236\u6210\u529F",setTimeout(()=>{this.copyText=this.document.visibility===1?"\u590D\u5236\u94FE\u63A5":"\u590D\u5236\u94FE\u63A5\u548C\u5BC6\u7801"},2e3))},show(){this.isShow=!0},setDocument(e={}){return this.document=e,this.copyText=e.visibility===1?"\u590D\u5236\u94FE\u63A5":"\u590D\u5236\u94FE\u63A5\u548C\u5BC6\u7801",this.isShare=e.visibility===0&&!!e.secret_key,this.updateLinkAndPassword(e.link,e.secret_key),this},updateLinkAndPassword(e,t){this.shareUrl=e||this.shareUrl,this.password=t||this.password,this.updateCopyText()},onResetPasswordBtnClick(){this.isLoadingResetPwd=!0,jr({project_id:this.project_id,doc_id:this.shareData.docId}).then(({data:e})=>this.updateLinkAndPassword(null,e)).finally(()=>{this.isLoadingResetPwd=!1})},updateCopyText(){this.copyTextEl.value=this.document.visibility===1?this.shareUrl:[`\u94FE\u63A5\uFF1A${this.shareUrl}`,`\u5BC6\u7801\uFF1A${this.password}`].join(`
`)},getShareDetail(){this.isShowDetail=!0,Pr({project_id:this.project_id,doc_id:this.shareData.docId}).then(({data:e})=>{this.setDocument(e)}).finally(()=>{this.isShowDetail=!1})}}},ka={class:"-m-4"},Pa={key:0},ja={key:1},Sa=a("div",{class:"flex-1"},[a("h4",null,"\u5F00\u542F\u5206\u4EAB"),a("div",{class:"ivu-list-item-meta-description"},"\u5F00\u542F\u5206\u4EAB\u540E\uFF0C\u83B7\u5F97\u94FE\u63A5\u7684\u4EBA\u53EF\u4EE5\u8BBF\u95EE\u9879\u76EE\u5185\u5BB9\u3002")],-1),Da=R("\u91CD\u7F6E\u5BC6\u7801"),xa={ref:"copyTextEl",style:{position:"fixed",left:"-9999px"}};function Ra(e,t,o,s,n,i){const r=f("el-button"),p=f("el-input"),l=f("el-form-item"),m=f("el-form"),j=f("el-switch"),E=f("el-divider"),g=f("el-dialog"),v=Be("loading");return u(),V(g,{modelValue:e.isShow,"onUpdate:modelValue":t[4]||(t[4]=S=>e.isShow=S),title:"\u5206\u4EAB\u6587\u6863","custom-class":"vertical-center-modal",width:540,"append-to-body":""},{default:d(()=>[Y((u(),h("div",ka,[e.document&&e.document.visibility===1?(u(),h("div",Pa,[c(m,{"label-position":"top",class:"px-6 py-3"},{default:d(()=>[c(l,{label:""},{default:d(()=>[c(p,{readonly:"",modelValue:e.shareUrl,"onUpdate:modelValue":t[0]||(t[0]=S=>e.shareUrl=S)},{append:d(()=>[c(r,{type:"primary",onClick:i.copy},{default:d(()=>[R(D(e.copyText),1)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])):x("",!0),e.document&&e.document.visibility===0?(u(),h("div",ja,[a("div",{class:$(["px-6 flex items-center",{"py-3":!e.isShare,"pt-3":e.isShare}])},[Sa,c(j,{loading:e.isLoading,modelValue:e.isShare,"onUpdate:modelValue":t[1]||(t[1]=S=>e.isShare=S),onChange:i.onShareStatusSwitch,"inline-prompt":"","active-text":"\u5F00","inactive-text":"\u5173"},null,8,["loading","modelValue","onChange"])],2),e.isShare?(u(),V(E,{key:0})):x("",!0),e.isShare?(u(),V(m,{key:1,"label-position":"top",class:"px-6"},{default:d(()=>[c(l,{label:"\u6587\u6863\u94FE\u63A5"},{default:d(()=>[c(p,{readonly:"",modelValue:e.shareUrl,"onUpdate:modelValue":t[2]||(t[2]=S=>e.shareUrl=S)},{append:d(()=>[c(r,{type:"primary",onClick:i.copy},{default:d(()=>[R(D(e.copyText),1)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1}),c(l,{label:"\u5BC6\u7801"},{default:d(()=>[c(l,{prop:"date",class:"mr-1"},{default:d(()=>[c(p,{readonly:"",modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=S=>e.password=S)},null,8,["modelValue"])]),_:1}),c(r,{loading:e.isLoadingResetPwd,onClick:i.onResetPasswordBtnClick},{default:d(()=>[Da]),_:1},8,["loading","onClick"])]),_:1})]),_:1})):x("",!0)])):x("",!0)])),[[v,e.isShowDetail]]),a("textarea",xa,null,512)]),_:1},8,["modelValue"])}var La=F(ba,[["render",Ra]]);let We=null;const Ne=()=>{We=$o.service({lock:!0,background:"rgba(255, 255, 255, 1)"})},ce=()=>{We&&We.close()};var Na=K({components:{DocumentShareModal:La,Plus:Fo,MoreFilled:Pt},setup(){const e=He("documentImportModal"),t=He("projectExportModal"),o=kt(),s=Ie(),{currentRoute:n}=s,{params:i}=o,{project_id:r}=i,p=Kt(),{apiDocTree:l}=le(p),m=zt,j=w(null),E=w(null),g=w(null),v=w(null),S=w(null),W=w({docType:null,dicId:null});let A=1;const L=null,k=yo(()=>n.value.name==="document.api.detail"),T=(b,y,B)=>{if(B.target.tagName!=="INPUT"){if(y.isLeaf){O(y);return}b.expanded=!b.expanded}},O=b=>{const{node_id:y}=n.value.params;k.value&&b.id===parseInt(y,10)||(Pe(b.id),s.push({name:"document.api.detail",params:re(P({},i),{node_id:b.id})}))},G=(b,y,B,J)=>{b.stopPropagation(),j.value=B.id,Ke.show(J,b.target,{node:y,source:B,isDetailPage:k.value})},ve=b=>{var y;G(b,(y=g.value)==null?void 0:y.root,l.value,"DIR_NEW_TYPE")},U=Eo(function(b){let y=0;return ie(B=>{B.isLeaf||y++},[b],{subKey:"sub_nodes"}),y}),q=(b,y,B)=>{const{data:J}=y,{data:X}=b;return J.isLeaf&&B==="inner"?!1:!X.isLeaf&&!J.isLeaf?U(X)+y.level<=5:!0},$e=b=>b.isLeaf?"is-doc":"is-dir",at=async()=>{var b,y,B;await vt(),(b=E.value)==null||b.focus(),(B=E.value)==null||B.setSelectionRange(0,(y=E.value)==null?void 0:y.value.length)},Wt=b=>{b.target&&b.target.blur()},qt=Xe(function(b,y){if(y.isEditable=!1,!b.target.value&&y._oldName){y.title=y._oldName;return}const B=y.type===fe.DIR,J=B?Rr:Ir,X={project_id:r,title:y.title};X[B?"node_id":"doc_id"]=y.id,J(X).then(()=>{delete y._oldName}).catch(()=>{y._oldName&&(y.title=y._oldName)})},200),Pe=b=>{var ue,lt;ie(ut=>{if(ut.isCurrent)return ut.isCurrent=!1,!1},l.value,{subKey:"sub_nodes"});const{node_id:y}=n.value.params,J=parseInt(b||y,10),X=(ue=g.value)==null?void 0:ue.getNode(J);X&&(X.data.isCurrent=!0,(lt=g.value)==null||lt.setCurrentKey(J))},ct=()=>{if(!g.value)return;let b=!1;if(ie(y=>{if(y.isCurrent)return b=!0,!1},l.value,{subKey:"sub_nodes"}),!b){let y=null;ie(X=>{let ue=g.value.getNode(X.id);if(ue&&ue.data.isLeaf)return y=ue,!1},l.value,{subKey:"sub_nodes"});let B={project_id:r};y&&(B.node_id=y.key,Pe(y.key));const J=S.value;J==null||J.scrollTo(0,0),s.replace({name:"document.api.detail",params:B})}},Xt=async()=>{!(await p.getApiDocTree(r)).length&&ce()};return qe(async()=>{await Xt(),n.value.params.node_id?Pe():ct()}),{index:A,oldDraggingNodeInfo:L,project_id:r,apiDocTree:l,renameInput:E,dir:S,activeMoreNodeId:j,treeIns:g,newMenus:m,documentShareModal:v,shareData:W,createDocIcon:Ht,handleTreeNodeClick:T,onRootMoreIconClick:ve,onMoreIconClick:G,allowDrop:q,customNodeClass:$e,onEnterKeyUp:Wt,setUnEditable:qt,inputFocus:at,activeNode:Pe,reactiveNode:ct,documentImportModal:e,projectExportModal:t}},mounted(){Ke.onPopperItemClick=({menu:e,node:t,source:o})=>this.onPopperItemClick(e,t,o),Ke.onPopperHide=()=>{this.activeMoreNodeId=null}},methods:{onPopperItemClick(e,t,o){const s=this[e.onClick];s&&s(t||this.treeIns.root,o||{sub_nodes:this.apiDocTree,id:0},e)},onRenameBtnClick(e,t){t._oldName=t.title,t.isEditable=!0,this.inputFocus()},onDeleteBtnClick(e,t){let o=!t.isLeaf;Bt({title:"\u5220\u9664\u63D0\u793A",content:c("div",{class:"break-all"},[R("\u786E\u5B9A\u5220\u9664\u300C"),t.title,R("\u300D"),o?"\u5206\u7C7B":"\u6587\u4EF6",R("\u5417\uFF1F")]),onOk:()=>{const s=t.type===fe.DIR,n=s?xr:br;let i={project_id:this.project_id};return i[s?"node_id":"doc_id"]=t.id,n(i).then(r=>{te.success(r.msg||"\u5220\u9664\u6210\u529F\uFF01"),this.treeIns.remove(e),this.reactiveNode()})}})},onCreateDirBtnClick(e,t){let o={project_id:this.project_id,name:"\u65B0\u5EFA\u5206\u7C7B"+this.index++};t.id&&(o.parent_id=t.id,o.pid=t.id),se.start(),Dr(o).then(s=>{const n=Se(s.data,fe.DIR);e.id===0?t.unshift(n):!t.sub_nodes||!t.sub_nodes.length?this.treeIns.append(n,e):this.treeIns.insertBefore(n,t.sub_nodes[0]),this.$nextTick(()=>{const i=this.treeIns.getNode(t);i&&(i.expanded=!0);const r=this.treeIns.getNode(s.data);r.data.isEditable=!0,setTimeout(()=>this.inputFocus(),100)})}).finally(()=>{se.done()})},createDoc(e,t){let o={project_id:this.project_id,parent_id:e.key,pid:e.key};se.start(),Er(o).then(({data:s})=>{this.treeIns.append(Se(s),e),this.$nextTick(()=>{this.treeIns.setCurrentKey(s.id);const n=this.treeIns.getNode(t);n&&(n.expanded=!0),this.$router.push({name:"document.api.edit",params:{project_id:this.project_id,node_id:s.id},query:{isNew:!0}}),this.activeNode(s.id)})}).finally(()=>{se.done()})},onMoveNodeStart(e){const t=e.parent;this.oldDraggingNodeInfo={oldPid:t.id===0?null:t.key,oldChildIds:t.childNodes.filter(o=>o.id!==e.id).map(o=>o.key)}},onMoveNode(e,t,o){if(!this.oldDraggingNodeInfo)return;const{oldPid:s,oldChildIds:n}=this.oldDraggingNodeInfo;let i=s===t.parent.id&&o!=="inner";const r=this.treeIns.getNode(e.data).parent,p=r.id===0?null:r.key,l=r.childNodes.map(j=>j.key),m={oldPid:i?p:s,oldChildIds:i?l:n,newPid:p,newChildIds:l};this.oldDraggingNodeInfo=null,Lr({new_pid:m.newPid||0,new_node_ids:m.newChildIds,old_pid:m.oldPid||0,old_node_ids:m.oldChildIds,project_id:this.project_id})},onCopyBtnClick(e,t){se.start(),wr({project_id:this.project_id,doc_id:t.id}).then(({data:o})=>{this.treeIns.insertAfter(Se(o),e),this.$router.push({name:"document.api.edit",params:{project_id:this.project_id,node_id:o.id}})}).finally(()=>{se.done()})},onShareBtnClick(e,t){this.shareData={docId:t.id,nodeId:t.id},this.documentShareModal.show()},onImportBtnClick(e,t){this.documentImportModal.show({project_id:this.project_id,parent_id:t.id?t.id:0},Sr)},onExportBtnClick(e,t){this.projectExportModal.title="\u5BFC\u51FA\u6587\u6863",this.projectExportModal.show({project_id:this.project_id,doc_id:t.id},pr)},updateTreeNode(e,t={title:""}){let o=this.treeIns.getNode(e);o&&o.data.title&&(o.data.title=t.title||o.title)},createHttpDoc(e,t){let o={project_id:this.project_id,parent_id:e.key,pid:e.key};se.start(),Cr(o).then(({data:s})=>{this.treeIns.append(Se(s),e),this.$nextTick(()=>{const n=this.treeIns.getNode(t);n&&(n.expanded=!0),this.$router.push({name:"document.api.edit",params:{project_id:this.project_id,node_id:s.id},query:{isNew:!0}})})}).finally(()=>{se.done()})}}});const Ta={class:"h-full overflow-x-scroll scroll-content",ref:"dir"},Oa={class:"flex justify-between items-center mb-7 px-1"},Ma=a("h3",{class:"text-base font-medium"},"\u76EE\u5F55",-1),Ba=a("div",{class:"el-tree-node__bg"},null,-1),$a=["onClick"],Fa=["src"],Va=["title"],Ga=["id","onUpdate:modelValue","maxlength","onBlur"],Ua=a("span",{class:"mx-1"},null,-1);function Ya(e,t,o,s,n,i){const r=f("plus"),p=f("el-icon"),l=f("more-filled"),m=f("el-tree"),j=f("DocumentShareModal");return u(),h(N,null,[a("div",Ta,[a("div",Oa,[Ma,c(p,{class:"cursor-pointer text-zinc-500",onClick:e.onRootMoreIconClick},{default:d(()=>[c(r)]),_:1},8,["onClick"])]),c(m,{data:e.apiDocTree,class:"bg-transparent","node-key":"id","empty-text":"",draggable:"",ref:"treeIns","expand-on-click-node":!1,props:{children:"sub_nodes",label:"title",class:e.customNodeClass},"allow-drop":e.allowDrop,onNodeDragStart:e.onMoveNodeStart,onNodeDrop:e.onMoveNode},{default:d(({node:E,data:g})=>[Ba,a("div",{class:$(["flex justify-between ac-tree-node",{"is-editable":g.isEditable}])},[a("div",{class:"ac-tree-node__main",onClick:v=>e.handleTreeNodeClick(E,g,v)},[a("div",{class:$(["ac-doc-node",{"is-active":g.isCurrent}])},[g.isLeaf?(u(),h("img",{key:0,class:"ac-doc-node__icon",src:e.createDocIcon},null,8,Fa)):x("",!0),Y(a("span",{class:"ac-doc-node__label",title:g.title},D(g.title),9,Va),[[ee,!g.isEditable]]),g.isEditable?Y((u(),h("input",{key:1,type:"text",ref:"renameInput",class:"ac-doc-node__input el-input el-input__inner",id:"tree_input_"+g.id,"onUpdate:modelValue":v=>g.title=v,onKeyup:t[0]||(t[0]=bt((...v)=>e.onEnterKeyUp&&e.onEnterKeyUp(...v),["enter"])),maxlength:g.isLeaf?255:50,onBlur:v=>e.setUnEditable(v,g)},null,40,Ga)),[[It,g.title]]):x("",!0)],2)],8,$a),a("div",{class:$(["ac-tree-node__more",{active:g.id===e.activeMoreNodeId}])},[Y(c(p,{onClick:v=>e.onMoreIconClick(v,E,g,"DIR_NEW_TYPE")},{default:d(()=>[c(r)]),_:2},1032,["onClick"]),[[ee,!g.isLeaf]]),Ua,Y(c(p,{onClick:v=>e.onMoreIconClick(v,E,g,"DIR_OPERATE_TYPE")},{default:d(()=>[c(l)]),_:2},1032,["onClick"]),[[ee,!g.isLeaf]]),Y(c(p,{onClick:v=>e.onMoreIconClick(v,E,g,"DOC_OPERATE_TYPE")},{default:d(()=>[c(l)]),_:2},1032,["onClick"]),[[ee,g.isLeaf]])],2)],2)]),_:1},8,["data","props","allow-drop","onNodeDragStart","onNodeDrop"])],512),c(j,{ref:"documentShareModal","share-data":e.shareData},null,8,["share-data"])],64)}var Ka=F(Na,[["render",Ya]]);const Ja=(e={})=>Ze.post("/upload_path",e),Je={},al=e=>new Promise((t,o)=>{const s={complete:!1,width:0,height:0,src:e};if(!e){o(s);return}if(Je[e]){t(P({},Je[e]));return}const n=new Image;n.onload=()=>{s.width=n.width,s.height=n.height,s.complete=!0,Je[e]=P({},s),t(s)},n.onerror=()=>{o(s)},n.src=e});function z(){this.chunkSize=1024*1024,this.threadsQuantity=2,this.timeout=1e3*10,this.file=null,this.aborted=!1,this.uploadedSize=0,this.progressCache={},this.activeConnections={},this.taskConfig={}}z.prototype.setOptions=function(e={}){this.chunkSize=e.chunkSize||this.chunkSize,this.threadsQuantity=e.threadsQuantity||this.threadsQuantity};z.prototype.setupFile=function(e){!e||(this.file=e)};z.prototype.start=function(){if(!this.file)throw new Error("Can't start uploading: file have not chosen");const e=Math.ceil(this.file.size/this.chunkSize);this.chunksQueue=new Array(e).fill().map((s,n)=>n).reverse();const t=new XMLHttpRequest;t.timeout=this.timeout,t.open("post","/api/upload_init"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.setRequestHeader("Accept","application/json, text/plain, */*");let o=C.get(C.KEYS.TOKEN)||"";o&&t.setRequestHeader("Authorization",o),t.withCredentials=!0,t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE&&t.status===200){const{status:s,msg:n,data:i}=JSON.parse(t.responseText);if(s!==0){this.complete(new Error(n||"\u4E0A\u4F20\u521D\u59CB\u5316\u5931\u8D25\uFF01"));return}this.fileId=i.file_id,this.sendNext()}},t.onerror=s=>{this.complete(s)},t.ontimeout=s=>{this.complete(s)},t.send(JSON.stringify({name:this.file.name,chunks:e,fileSize:Math.ceil(this.file.size/1024)}))};z.prototype.sendNext=function(){const e=Object.keys(this.activeConnections).length;let t=!1;if(Object.keys(this.taskConfig).forEach(i=>{this.taskConfig[i].retryCount>=3&&(t=!0)}),t){this.complete(new Error("\u4E0A\u4F20\u5931\u8D25\uFF01"));return}if(e>=this.threadsQuantity)return;if(!this.chunksQueue.length){e||this.getResult();return}const o=this.chunksQueue.pop(),s=o*this.chunkSize,n=this.file.slice(s,s+this.chunkSize);this.sendChunk(n,o).then(()=>this.sendNext()).catch(i=>{this.chunksQueue.push(o);let r=this.taskConfig[o];r&&r.retryCount<=3?this.sendNext():this.complete(i)}),this.sendNext()};z.prototype.complete=function(e){const t=e&&e.message||e;if(e&&!this.aborted){this.end(t);return}this.end(t)};z.prototype.sendChunk=function(e,t){return this.upload(t,e)};z.prototype.handleProgress=function(e,t){(t.type==="progress"||t.type==="error"||t.type==="abort")&&(this.progressCache[e]=t.loaded),t.type==="loadend"&&(this.uploadedSize+=this.progressCache[e]||0,delete this.progressCache[e]);const o=Object.keys(this.progressCache).reduce((n,i)=>n+=this.progressCache[i],0),s=Math.min(this.uploadedSize+o,this.file.size);this.onProgress&&this.onProgress({loaded:s,total:this.file.size})};z.prototype.upload=function(e,t){return new Promise((o,s)=>{let n=this.taskConfig[e]=this.taskConfig[e]||{retryCount:0};const i=this.activeConnections[e]=new XMLHttpRequest;i.timeout=this.timeout;const r=this.handleProgress.bind(this,e);i.upload.addEventListener("progress",r),i.addEventListener("error",r),i.addEventListener("abort",r),i.addEventListener("loadend",r),i.open("post","/api/upload_save"),i.setRequestHeader("Accept","application/json, text/plain, */*");let p=C.get(C.KEYS.TOKEN)||"";p&&i.setRequestHeader("Authorization",p),i.onreadystatechange=()=>{if(delete this.activeConnections[e],i.readyState===XMLHttpRequest.DONE&&i.status===200){const m=JSON.parse(i.responseText);if(m.status!==0){s(new Error(m.msg||"\u4E0A\u4F20\u5931\u8D25\uFF01")),n.retryCount++;return}m.status===0&&o(m)}i.readyState===XMLHttpRequest.DONE&&i.status!==200&&(s(new Error("\u4E0A\u4F20\u5931\u8D25\uFF01")),n.retryCount++)},i.onerror=m=>{s(m),delete this.activeConnections[e]},i.onabort=()=>{s(new Error("\u53D6\u6D88\u4E0A\u4F20\uFF01")),delete this.activeConnections[e]},i.ontimeout=m=>{s(m),delete this.activeConnections[e]};let l=new FormData;l.append("file_id",this.fileId),l.append("chunk_id",e),l.append("file",t),i.send(l)})};z.prototype.on=function(e,t){typeof t!="function"&&(t=ye),this[e]=t};z.prototype.abort=function(){Object.keys(this.activeConnections).forEach(e=>{this.activeConnections[e].abort()}),this.aborted=!0};z.prototype.getResult=function(){Ja({file_id:this.fileId}).then(e=>this.end(null,e)).catch(e=>this.complete(e))};const Ha=function(){const e=new z;return{options:function(t){return e.setOptions(t),this},send:function(t){return e.setupFile(t),this},continue:function(){e.sendNext()},onProgress:function(t){return e.on("onProgress",t||ye),this},end:function(t){return e.on("end",t||ye),e.start(),this},abort:function(){e.abort()}}};const za={props:{maxSize:{type:Number,default:1},multiple:{type:Boolean,default:!1}},data(){return{isShow:!1,isLoading:!1,isPoll:!1,title:"\u5BFC\u5165\u6587\u6863",params:{},jobParams:{id:null},importList:[],currentConfig:null,timer:null}},methods:{projectItemClass(e){return["ac-project-export-item","ac-project-export-file",{disabled:e.disabled}]},hide(){this.isShow=!1},show(e,t){this.clearTimer(),this.isShow=!0,this.importList=t||[],this.params=e||{}},onFileChange(e,t){this.currentConfig=t||{},this.validFile(e)&&this.upload()},validFile(e){const t=e.target.files;if(!t)return!1;let o=Array.prototype.slice.call(t);if(this.multiple||(o=o.slice(0,1)),o.length===0)return!1;let s=o[0];e.target.value=null;let{maxSize:n}=this.currentConfig;return n=n||this.maxSize,s.size>n*1024*1024?(this.$Message.error(`\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7${n}MB`),!1):(this.currentConfig.file=s,!0)},upload(){if(!this.currentConfig||!this.currentConfig.file)return this.$Message.error("\u672A\u9009\u62E9\u6587\u4EF6\uFF01");this.isLoading=!0,Ha().options().send(this.currentConfig.file).end((e,t)=>{if(e){this.isLoading=!1,this.$Message.error(e instanceof Error?e.message:e);return}this.currentConfig.fileUrl=t.data,this.getImportJobId(this.buildParams())})},getImportJobId(e){if(!this.currentConfig||!this.currentConfig.action)return this.isLoading=!1,Promise.resolve();this.currentConfig.action(e).then(t=>{this.jobParams.id=t.data||null,this.isPoll=!0,this.getExecResult()}).catch(()=>{this.isLoading=!1})},clearTimer(){this.currentConfig=null,this.isLoading=!1,this.isPoll=!1},async exec(){if(!this.currentConfig||!this.currentConfig.getJobResult||!this.jobParams.id)return this.clearTimer(),Promise.resolve();try{const{data:e,msg:t}=await this.currentConfig.getJobResult(this.params.project_id,this.jobParams.id);if(e.result===me.FAIL){this.$Message.error(t||"\u5BFC\u5165\u5931\u8D25\uFF01"),this.clearTimer();return}if(e.result===me.WAIT)return;e.result===me.FINISH&&(this.$Message.success(t||"\u5BFC\u5165\u5B8C\u6210\uFF01"),this.clearTimer(),this.hide(),location.reload())}catch{this.clearTimer()}},async getExecResult(){for(;this.isPoll;)await this.exec(),await yt(2e3)},buildParams(){return this.currentConfig?re(P({},this.params),{filename:this.currentConfig.file?this.currentConfig.file.name:"\u672A\u547D\u540D",file:this.currentConfig.fileUrl,type:this.currentConfig.type}):{}}}},Za={class:"ac-project-export","element-loading-text":"\u5BFC\u5165\u4E2D\uFF0C\u8BF7\u52FF\u5173\u95ED\u7A97\u53E3\uFF01"},Qa={class:"ac-project-export-inner"},Wa=["src","alt"],qa={class:"mt-1.5"},Xa=["onChange","accept"];function ec(e,t,o,s,n,i){const r=f("el-dialog"),p=Be("loading");return u(),V(r,{modelValue:n.isShow,"onUpdate:modelValue":t[0]||(t[0]=l=>n.isShow=l),width:"fit-content","custom-class":"vertical-center-modal","close-on-click-modal":!1,title:n.title,"append-to-body":""},{default:d(()=>[Y((u(),h("div",Za,[(u(!0),h(N,null,H(n.importList,l=>(u(),h("div",{class:$(i.projectItemClass(l)),key:l.type},[a("div",Qa,[a("img",{src:l.icon,alt:l.text},null,8,Wa),a("p",qa,D(l.text),1),a("input",{type:"file",onChange:m=>i.onFileChange(m,l),accept:l.accept},null,40,Xa)])],2))),128))])),[[p,n.isLoading]])]),_:1},8,["modelValue","title"])}var tc=F(za,[["render",ec],["__scopeId","data-v-d927ecec"]]);const oc={class:"ac-doc-layout"},sc={class:"ac-doc-layout--left"},nc={class:"ac-doc-layout--right"},ic=a("div",{class:"ac-doc-layout__gap"},null,-1),rc=K({setup(e){const t=w(),o=w(),s=w();return pe("projectExportModal",t),pe("documentImportModal",o),pe("updateTreeNode",(n,i)=>s.value&&s.value.updateTreeNode(n,i)),(n,i)=>{const r=f("router-view"),p=bi;return u(),h(N,null,[c(ea),a("main",oc,[a("div",sc,[c(Ka,{ref_key:"directoryTree",ref:s},null,512)]),a("div",nc,[ic,c(r)])]),c(p,{ref_key:"projectExportModal",ref:t},null,512),c(tc,{ref_key:"documentImportModal",ref:o},null,512)],64)}}}),ac=()=>M(()=>import("./DocumentDetail.178cca7e.js"),["assets/DocumentDetail.178cca7e.js","assets/useHighlight.10314a85.js","assets/vendor.2ee35ec0.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),cc=()=>M(()=>import("./DocumentEditor.824ea960.js"),["assets/DocumentEditor.824ea960.js","assets/vendor.2ee35ec0.js","assets/params.5984f49b.js","assets/element-plus.5b1d6711.js","assets/element-plus.898dbfba.css"]),Zt="/editor/:project_id/doc/:node_id?",lc=et(Zt);var uc={path:"/editor",name:St,component:rc,redirect:{name:"document.api.detail"},children:[{path:Zt,name:"document.api.detail",component:ac},{path:"/editor/:project_id/doc/:node_id/edit",name:"document.api.edit",component:cc}]};function dc(e){e.beforeEach(async(t,o,s)=>{const i=ae().isLogin;if(t.meta.ignoreAuth){if(i&&(t.path===Ee||t.path===tt)){s(ot);return}s();return}if(!i){s({path:Ee,replace:!0});return}s()})}function pc(e){e.beforeEach(async(t,o,s)=>{const n=it();if(!t.matched.find(r=>r.name===St))return s();const i=parseInt(t.params.project_id,10);if(n.projectInfo&&n.projectInfo.id===i)return s();try{if(Ne(),await n.getProjectDetail(i),n.isReader)return ce(),s(Q)}catch{return ce(),s(Q)}return s()})}const Qt=ge({id:"preview",state:()=>({projectInfo:null,documentInfo:null}),getters:{},actions:{async getProjectInfo(e){const{data:t}=await Mi(e);return this.projectInfo=t||null,this.projectInfo},async getDocumentInfo(e){const t=C.get(C.KEYS.SECRET_DOCUMENT_TOKEN+e,!0)||"",{data:o}=await Oi(t,e);return this.documentInfo=o||null,this.documentInfo},goVerificationPage(){const e=ne.currentRoute.value.params.project_id||"",t=ne.currentRoute.value.params.doc_id||"",o=ne.currentRoute.value.name||"";if(o.includes(Ce)){C.remove(C.KEYS.SECRET_PROJECT_TOKEN+e,!0),ne.push({name:Re,params:{project_id:e}});return}o.includes(we)&&(C.remove(C.KEYS.SECRET_DOCUMENT_TOKEN+t,!0),ne.push({name:Le,params:{document_id:t}}))}}});function hc(e){e.beforeEach(async(t,o,s)=>{const n=Qt(),{isLogin:i}=ae(),{projectInfo:r}=le(n),{name:p,params:l}=t,m=!!C.get(C.KEYS.SECRET_PROJECT_TOKEN+l.project_id,!0),j=!!C.get(C.KEYS.SECRET_DOCUMENT_TOKEN+l.doc_id,!0);if(String(p).startsWith(Ce)){if(!r.value)try{Ne();const S=await n.getProjectInfo(l.project_id);if(!S||!S.id)return ce(),s(Q)}catch{return ce(),s(Q)}const{has_shared:E,visibility:g,in_this:v}=r.value||{};if(g){s();return}if(i&&v){s();return}if(!g&&!i&&!E){s(Q);return}if(!g&&!E&&i&&!v){s(Q);return}if(!g&&!E&&i&&v){s();return}if(p===Re){s();return}if(!g&&E&&!m){s({name:Re,params:{project_id:l.project_id}});return}if(!g&&E&&m){s();return}s(Q);return}if(String(p).startsWith(we)){if(p===Le){s();return}if(!j){s({name:Le,params:{doc_id:l.doc_id}});return}Ne();try{const E=await n.getDocumentInfo(l.doc_id);return!E||!E.id?s(Q):s()}catch{}finally{ce()}s(Q);return}s()})}function _c(e){e.beforeEach(async(t,o,s)=>{const n=it();if(!ft.some(r=>r.name===t.name)||n.projectInfo&&t.params.project_id===String(n.projectInfo.id))return s();let i=null;Ne();try{const r=await n.getProjectDetail(parseInt(t.params.project_id));ft.filter(m=>m.meta.role.indexOf(r.authority)!==-1).some(m=>m.name===t.name)||(i=Q)}catch{i=Q}finally{ce()}return i?s(i):s()})}const mc=e=>{dc(e),pc(e),_c(e),hc(e)},ne=Co({history:wo("/"),routes:[En,Cn,wn,{path:ot,name:"main",component:Ms,redirect:{name:"projects"},children:[pi,Tn,Mn,vi]},uc,lr,cr,ur,In]});var fc=e=>{e.config.globalProperties.$Message=te,e.use(Vo)};const gc=function(e){e.mixin({mounted:function(){e.__clipboard__&&e.__clipboard__.destroy(),e.__clipboard__=new Io(".copy_text",{text:function(t){return wt(t.getAttribute("data-text")||t.innerText||"")}}),e.__clipboard__.on("success",()=>{te.closeAll(),te.success("\u590D\u5236\u6210\u529F")})}})};var vc={install:gc};class Ac{constructor(){this._pendingMap=new Map}gatherKey(t){return[t.url,t.method,JSON.stringify(t.params)].join("_")}add(t){this.remove(t);const o=Me.CancelToken.source();t.cancelToken=t.cancelToken||o.token;const s=this.gatherKey(t);this._pendingMap.set(s,o.cancel)}remove(t){const o=this.gatherKey(t);if(this._pendingMap.has(o)){const s=this._pendingMap.get(o);s&&ht(s)&&s(),this._pendingMap.delete(o)}}removeAll(){this._pendingMap.forEach(t=>t&&ht(t)&&t()),this.clear()}clear(){this._pendingMap.clear()}}const De=new Ac,yc=()=>{_.interceptors.request.use(e=>{De.add(e);const t=ae().token;return t&&(e.headers=re(P({},e.headers),{Authorization:t})),e}),_.interceptors.response.use(e=>{De.remove(e.config);let t="";!e.data&&(e.data={});const o=e.data.status;switch(e.headers.authorization&&ae().updateToken(e.headers.authorization),o){case de.NO_LOGIN:t="\u767B\u5F55\u72B6\u6001\u5DF2\u5931\u6548\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55",De.removeAll(),ae().logout();break;case de.INVALID_PREVIEW_SECRET:t=e.data.msg||"\u8BBF\u95EE\u79D8\u94A5\u5DF2\u5931\u6548\u3002",De.removeAll(),Qt().goVerificationPage();break;case de.OK:case de.NO_PARENT_DIR:case de.NOT_FOUND:break;default:t=e.data.msg||"\u6570\u636E\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01";break}return t?Promise.reject({message:t}):e.data}),_.interceptors.response.use(void 0,e=>{var i,r;let t="";const{code:o,message:s}=e||{},n=(r=(i=e==null?void 0:e.toString)==null?void 0:i.call(e))!=null?r:"";return t=s,o==="ECONNABORTED"&&t.indexOf("timeout")!==-1&&(t="\u8BF7\u6C42\u8D85\u65F6\uFF0C\u8BF7\u91CD\u8BD5"),n!=null&&n.includes("Network Error")&&(t="\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u91CD\u8BD5"),te.closeAll(),t&&te.error(t),Promise.reject(e)}),Ze.interceptors.request.use(e=>{const t=ae().token;return t&&(e.headers=re(P({},e.headers),{Authorization:t})),e}),Ze.interceptors.response.use(e=>{let t;switch(!e.data&&(e.data={}),e.data.status){case 0:break;default:t=e.data.msg||"\u6570\u636E\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01";break}return t?Promise.reject(t):e.data},e=>(e.message.indexOf("timeout")!==-1&&te.error("\u8BF7\u6C42\u8D85\u65F6\uFF0C\u8BF7\u91CD\u8BD5\uFF01"),Promise.reject(e)))};yc();const ke=bo(Wo);ke.use(ko());ke.use(ne);ke.use(vc);mc(ne);fc(ke);ke.mount("#app");export{nt as $,_ as A,Vc as B,bc as C,fe as D,Uc as E,Gc as F,Yc as G,Fc as H,Zc as I,kc as J,Kc as K,Ee as L,rl as M,de as N,zc as O,Ic as P,Rc as Q,tt as R,Tt as S,os as T,tl as U,Sc as V,Dc as W,jc as X,xc as Y,Sr as Z,be as _,ae as a,nl as a0,ce as a1,vr as a2,Ti as a3,M as a4,Ha as a5,al as a6,ol as a7,sl as a8,il as a9,Ir as aa,C as ab,Qt as ac,qc as ad,el as ae,Ne as af,Xc as ag,Qc as ah,Wc as ai,xt as aj,rs as ak,F as b,_e as c,Bt as d,Pc as e,Mt as f,Mc as g,Oc as h,Lc as i,Hc as j,je as k,bi as l,Tc as m,Li as n,ss as o,Bc as p,$c as q,Yt as r,Nc as s,Jc as t,Xo as u,lc as v,Z as w,ar as x,it as y,ft as z};
